<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>3D相机管理</h1>

<h2>1. 功能概述</h2>

<p>3D相机管理模块集成了各类相机的开发工具包，使得VA软件能支持各类3D相机的图像采集以及参数调试。</p>

<p>目前支持8种相机，线扫相机：SSZN、Keyence、SmartRay、LMI、FocalSpec；面阵相机：LCubor、RVC；点激光相机：Hypersen SF2000系列。</p>

<h2>2. 使用向导</h2>

<h3>2.1 连接相机</h3>

<p>相机连接方式有两种，</p>

<p>第一种自动连接：相机硬件连接后，用户无需操作，打开软件自动连接相机，如FocalSpec、LCubor、RVC；</p>

<p>第二种手动配置IP连接：相机硬件连接后，需要先打开3D相机管理的IP配置界面，手动配置相机种类及相机IP等信息后连接相机，操作步骤如下图：</p>

<p><img src="media/%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AEIP.gif" alt="" /></p>

<h3>2.2 参数设置</h3>

<p>参数设置分为四个栏目：触发设置、拍照设置、软件设置、其他设置</p>

<ul>
<li>触发设置：设置相机的触发模式参数，包括扫描行数、分辨率、IO触发、数据触发等参数。</li>
<li>拍照设置：设置相机的成像参数，包括曝光、增益、材质类型等参数。</li>
<li>软件设置：设置相机预处理参数，包括各类滤波、平滑、补缺等参数。</li>
<li>其他设置：主要设置相机配方参数，包括切换配方、保存参数文件、相机安装角度等参数。</li>
</ul>


<p>将鼠标移动到对应参数名上，左下角说明栏可以简略显示出该参数的调试说明，如下图：</p>

<p><img src="media/2_2.gif" alt="" /></p>

<h3>2.3 显示图像</h3>

<p>3D相机管理总计可现实5类图像，不同相机显示图像类型会有不同。</p>

<p>深度图：显示单帧图像，可显示对应XY位置的深度（高度）信息。</p>

<p><img src="media/2_3_1.jpg" alt="" /></p>

<p>激光亮度图：线扫相机实时模式下的激光线图像，灰度图，主要用于相机工作距离的调试。</p>

<p><img src="media/2_3_2.jpg" alt="" /></p>

<p>轮廓图：线扫相机实时模式下的采集的轮廓图像，Y坐标轴代表实际物理高度值，主要用于相机工作距离的调试。</p>

<p><img src="media/2_3_3.jpg" alt="" /></p>

<p>灰度图：显示单帧图像，可显示对应XY位置的灰度（亮度）信息。</p>

<p><img src="media/2_3_4.jpg" alt="" /></p>

<p>高度/厚度数据：仅应用于点激光相机，显示点的高度信息。</p>

<p><img src="media/2_3_5.png" alt="" /></p>

<h3>2.4 保存图像</h3>

<p>3D相机管理支持深度图与灰度图的保存:</p>

<p>相机采集到深度图像后，可点击右上角的"保存深度图像"按钮来进行保存，图像格式为bmp。</p>

<p>相机采集到灰度图像后，可图像窗口右击选择“保存图像”来进行保存，图像格式为bmp。</p>

<h2>3.常见问题</h2>

<h3>3.1 相机连不上</h3>

<p>相机连不上排查步骤：</p>

<ol>
<li><p>确认控制器/相机上电情况</p></li>
<li><p>安装对应的相机驱动软件</p></li>
<li><p>检查本地IP与相机IP是否在同一网段</p></li>
<li><p>关闭windows防火墙</p>

<p><img src="media/3_1.png" alt="" /></p></li>
</ol>


<h3>3.2 IO触发模式下相机偶尔出现不采集现象</h3>

<p>排查方向：排查相机的触发时序，必须确保采集工具运行后，再给IO触发。</p>

<p>建议加上通信信号完成闭环，流程图搭建如下图：</p>

<p><img src="media/3_2.png" alt="" /></p>

<h3>3.3 编码器触发异常</h3>

<p>现象1：完全没有收到编码器信号。排查方向：排查相机触发接线是否正确，SSZN相机可参考下方接线图。</p>

<p>现象2：收到编码器信号不足。排查方向：排查接线是否松动，确认分频大小是否合适（是否超频）</p>

<p>现象3：收到过多的编码器信号。排查方向：排查信号干扰屏蔽情况，确认分频大小是否合适（是否超频）</p>

<p><img src="media/3_3_1.png" alt="" /></p>

<p><img src="media/3_3_2.png" alt="" /></p>

<h3>3.4 采集耗时相关问题</h3>

<p>查看采集日志，分析采集日志中耗时过大的地方在哪，再进一步分析根因。</p>

<p>日志存放路径：&hellip;\LusterCache\3DCameraLog\3DCameraLog_2022-XX-XX.txt</p>

<p>1.若是开启IO触发后，在等待IO信号时耗时较久，此为正常现象（等待IO信号也会计算进采集耗时）。</p>

<p>2.若是相机图像数据传输耗时久，则查看以下几点。</p>

<ul>
<li>网线及传感头与控制器线缆的连接情况</li>
<li>电脑内存占用是否过高</li>
<li>网卡是否未开启巨型帧</li>
<li>SSZN相机的数据大小是否设置为16bit</li>
</ul>


<h3>3.5 相机经常掉线，出现参数丢失的现象</h3>

<p>确认相机供电是否稳定，尽量配上独立电源</p>

<h3>3.6 视图中采集的图像被拉长或者压缩</h3>

<p>通常是使用仿射采样后出现，确认相机Y分辨率、图像分辨率是否异常</p>

<p>排查相机供电情况，是否会经常掉线</p>

<h3>3.7 采集成功，但是没图像</h3>

<p>现象1：图像一片黑。排查方向：有没有出激光，曝光是否过低，产品是否在相机工作范围内</p>

<p>现象2：完全没有图像。排查方向：确认相机驱动权限是否过期</p>
