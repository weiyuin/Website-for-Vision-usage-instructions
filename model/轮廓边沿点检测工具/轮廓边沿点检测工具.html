<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>轮廓边沿点检测工具</h1>

<h2>1. 功能概述</h2>

<p>​ 轮廓边沿点检测工具计算轮廓数据上的边沿点的工具。</p>

<h2>2. 应用场景</h2>

<p>​ 轮廓边沿点检测工具主要是获取深度图像中感兴趣区域内所截取轮廓数据的边沿特征点坐标信息。根据从深度图像中截取的轮廓数据获取边沿特征点的二维坐标信息，轮廓边沿点检测工具输出边沿点坐标可以作为拟合测量或其它工具的输入参数。</p>

<h2>3. 使用向导</h2>

<p><strong>step1：</strong>添加图像文件、截面生成工具、轮廓边沿点检测工具，并进行参数的链接，如图3-1所示；</p>

<p><img src="media/GcProfileEdgePointTool3_1.png" alt="img" /></p>

<p><imgnote>图3_1 轮廓边沿点检测：轮廓边沿点检测工具</imgnote></p>

<p><strong>step2：</strong>参数设置：</p>

<p><strong>边沿极性：</strong>即上升沿、下降沿或任意沿。</p>

<p><img src="media/GcProfileEdgePointTool3_2.png" alt="img" /></p>

<p><imgnote>图3_2 轮廓边沿点检测：极值点参数设置</imgnote></p>

<p><strong>上升沿：</strong>轮廓数据中下一个轮廓点与当前轮廓点的高度差大于零，此时两者的中心点即为上升沿，如图3-2.(a)中红色点所示。
<strong>下降沿：</strong>轮廓数据中下一个轮廓点与当前轮廓点的高度差小于零，此时两者的中心点即为下降沿，如图3-2.(b)中红色点所示。
<strong>任意沿：</strong>上升沿或下降沿，当同时存在上升沿或下降沿时，输出两者中高度差绝对值较大的边沿。
<strong>边沿类型：</strong>提供最强、第一个、最后一个和期望高度五种类型，如图3-3所示，以上升沿为例，具体含义如下：</p>

<p><img src="media/GcProfileEdgePointTool3_3.png" alt="img" /></p>

<p><imgnote>图3_3 轮廓边沿点检测：边缘点参数设置</imgnote></p>

<p><strong>最强：</strong>两侧的高度差最大的边沿点，高度差需高于高度阈值，边沿两侧高度差越大，其边沿点得分越高。在图3-3中，E2 为最强边沿点。
<strong>第一个：</strong>在轮廓数据中，从左到右最早出现且满足高度阈值的边沿，边沿位置越靠前，其得分越高。在图3-3中，E1位置最靠前，为第一个边沿。
<strong>最后一个：</strong>在轮廓数据中，从左到右最后出现且满足高度阈值的边沿，边沿位置越靠后，其得分越高。在图3-3中，E3位置最靠后，为最后一个边沿。</p>

<p><strong>步进宽度：</strong>待检测边沿的宽度，即当前轮廓点与下一个轮廓点X坐标的差值，步进宽度作为遍历的步长，过大的步进宽度会降低检测的精度。图3-4为窗口大小为3时的示意，当要检测上升沿时，步进宽度设置不应该大于两个窗口的水平距离。</p>

<p><strong>平滑窗口：</strong>当平滑窗口大小大于1时，先计算窗口内所有轮廓数据的高度均值，再使用均值计算边沿高度差，此时的高度差与高度阈值比对确定是否为边沿点，平滑窗口起到对轮廓数据点平滑过滤的作用。图3-4为窗口大小为3时的示意，两个窗口内的高度均值分别为H1和H2，此时上升沿E1的高度差为H2-H1。</p>

<p><img src="media/GcProfileEdgePointTool3_4.png" alt="img" /></p>

<p><imgnote>图3_4 轮廓边沿点检测：边缘点参数设置</imgnote></p>

<p><strong>最大间隙宽度：</strong>在因遮挡等原因导致轮廓数据缺失区域中，用于设置填充无效点的最大距离，能够保证数据的连续性。当轮廓无效值的间隙宽度小于最大间隙宽度时则使用无效值两端较小值进行填充，否则不进行填充或使用自定义填充值填充（需启用无效值填充），当最大间隙宽度和无效值填充同时生效时，优先使用最大间隙宽度进行填充。</p>

<p><strong>得分约束：</strong>设定得分阈值，过滤结果中得分小于设定阈值的边沿。</p>

<h2>4. 常见问题</h2>

<p>无</p>

<h2>5. 参数说明</h2>

<h4>输入参数（参数链）</h4>

<table>
<thead>
<tr>
<th> 参数名称       </th>
<th> 参数说明                                                     </th>
</tr>
</thead>
<tbody>
<tr>
<td> 输入轮廓数据 </td>
<td> 输入待检测的轮廓数据，该参数来源于截面生成工具                                                        </td>
</tr>
<tr>
<td> 二维线性变换 </td>
<td> 目标相对于模板的平移、旋转、缩放变换 </td>
</tr>
</tbody>
</table>


<h4>输入参数（属性窗口）</h4>

<table>
<thead>
<tr>
<th> 参数名称       </th>
<th> 参数说明                                                     </th>
</tr>
</thead>
<tbody>
<tr>
<td> ROI类型  </td>
<td> 分为3种，整幅图像、矩形ROI和仿射矩形ROI </td>
</tr>
<tr>
<td> 启用双边沿模式 </td>
<td> 开启时查找一对边沿点，不开启时查找单个边沿点 </td>
</tr>
<tr>
<td> 边沿1/2极性 </td>
<td> 包括三种模式：上升沿、下降沿、任意 </td>
</tr>
<tr>
<td> 边沿1/2类型 </td>
<td> 包括三种模式：最强、第一个、最后一个 </td>
</tr>
<tr>
<td> 绝对高度阈值 </td>
<td> 取值范围：[0,100000000], 单位：mm。 </td>
</tr>
<tr>
<td> 步进宽度 </td>
<td> 待检测边沿的宽度，即当前轮廓点与下一个轮廓点X坐标的差值, 取值范围：[0,100000000] </td>
</tr>
<tr>
<td> 步进平滑窗口 </td>
<td> 当平滑窗口大小大于1时，先计算窗口内所有轮廓数据的高度均值，再使用均值计算边沿高度差, 取值范围：[1,100] </td>
</tr>
<tr>
<td> 高级参数设置     </td>
<td> 显示可以调节的高级参数                                       </td>
</tr>
<tr>
<td> 启用相对高度阈值 </td>
<td> 选“是”，开启相对高度阈值设置 </td>
</tr>
<tr>
<td> 相对高度阈值 </td>
<td> 将绝对高度归一化到[0,1]，取值范围：[0,1] </td>
</tr>
<tr>
<td> 最大间隙宽度 </td>
<td> 用于设置填充无效点的最大距离，能够保证数据的连续性, 取值范围：[0,100000000], 单位：mm </td>
</tr>
<tr>
<td> 启用无效值填充 </td>
<td> 选“是”，开启无效填充值设置 </td>
</tr>
<tr>
<td> 无效填充值 </td>
<td> 取值范围：[-100000000,100000000], 单位：mm </td>
</tr>
<tr>
<td> 启用宽度评价 </td>
<td> 双边沿模式生效，选“是”，开启宽度评价，设置期望宽度，最后过滤出最接近期望宽度的一组边沿点 </td>
</tr>
<tr>
<td> 双边沿期望宽度 </td>
<td> 取值范围：[0,100000000], 单位：mm </td>
</tr>
<tr>
<td> 启用得分约束 </td>
<td> 对结果进行过滤，选“是”，开启得分约束类型和约束阈值设置 </td>
</tr>
<tr>
<td> 得分约束类型 </td>
<td> 包括两种：绝对得分约束和相对得分约束 </td>
</tr>
<tr>
<td> 边沿得分约束阈值 </td>
<td> 取值范围：[0,1] </td>
</tr>
</tbody>
</table>


<h4>输出参数（参数链）</h4>

<table>
<thead>
<tr>
<th> 参数名称     </th>
<th> 参数说明               </th>
</tr>
</thead>
<tbody>
<tr>
<td> 边沿点1、边沿点2、边沿得分、边沿高度差1、边沿高度差2、双边沿对宽度 </td>
<td> 计算结果 </td>
</tr>
</tbody>
</table>


<h4>输出参数（输出窗口）</h4>

<table>
<thead>
<tr>
<th> 参数名称     </th>
<th> 参数说明               </th>
</tr>
</thead>
<tbody>
<tr>
<td> 输入轮廓数据 </td>
<td> 输入的轮廓数据，包括轮廓点数，有效点数 </td>
</tr>
<tr>
<td> 计算结果 </td>
<td> 主要包括：边沿点1、边沿点2、边沿得分、边沿高度差1、边沿高度差2、双边沿对宽度 </td>
</tr>
<tr>
<td> 执行时间 </td>
<td> 工具执行时间 </td>
</tr>
<tr>
<td> 执行结果 </td>
<td> 工具执行结果 </td>
</tr>
</tbody>
</table>


<h2>6. 示例工程</h2>

<p>​ 参见“\Samples\3D\深度图\3D测量工具.gvp”。</p>

<h2>7. 特殊说明</h2>

<p>​ 无</p>
