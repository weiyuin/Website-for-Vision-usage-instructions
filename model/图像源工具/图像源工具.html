<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>Công cụ nguồn ảnh</h1>

<h2>1. Giới thiệu chức năng</h2>

<p>​     Công cụ nguồn ảnh được dùng để thay thế công cụ thu nhận ảnh, công cụ ảnh đơn và công cụ thư mục ảnh nhằm đơn giản hóa quy trình thu nhận ảnh. Do đó, chức năng chính của nó là lấy ảnh và xuất ra cho các công cụ khác sử dụng. Đồng thời, công cụ còn tích hợp chức năng điều khiển đèn và tăng cường hình ảnh.</p>

<h2>2. Kịch bản ứng dụng</h2>

<p><img src="media/GcImageSourceAdvanceTool_1_1.png" alt="GcImageSourceAdvancedTool_1_1" /></p>

<h2>3. Nguyên lý hoạt động</h2>

<p>​     Công cụ nguồn ảnh sẽ quyết định nguồn ảnh dựa trên trạng thái hệ thống. Khi hệ thống ở trạng thái trực tuyến, công cụ sẽ lấy ảnh từ camera; khi hệ thống ở trạng thái ngoại tuyến, công cụ sẽ lấy ảnh từ tệp hoặc thư mục ảnh.</p>

<h2>4. Hướng dẫn sử dụng</h2>

<ul>
<li><h4>Thêm công cụ, nhấn chuột phải để mở cửa sổ thuộc tính nâng cao</h4></li>
</ul>

<p><img src="media/GcImageSourceAdvanceTool_4_1.png" alt="GcImageSourceAdvanceTool_4_1" /></p>

<ul>
<li><h4>Tham số camera</h4></li>
</ul>


<p><img src="media/GcImageSourceAdvanceTool_4_2.png" alt="GcImageSourceAdvanceTool_4_2" /></p>

<p><strong>Tên camera</strong></p>

<p>Hiển thị danh sách thả xuống các camera đang kết nối, chọn tên camera cần lấy ảnh.</p>

<p><strong>Tham số độc lập</strong></p>

<p>Khi không chọn “tham số độc lập”, công cụ sẽ sử dụng các tham số bên trong camera khi thực thi, các thiết lập về phơi sáng, Gamma và độ lợi sẽ bị ẩn. Khi chọn “tham số độc lập”, các thiết lập này sẽ hiển thị và có thể cài đặt trong công cụ mà không làm thay đổi giá trị bên trong camera.</p>

<p><strong>Phơi sáng</strong></p>

<p>Chỉ khả dụng khi bật “tham số độc lập”, dùng để thiết lập giá trị phơi sáng khi công cụ hoạt động. Nếu không chọn thì mục này sẽ bị ẩn.</p>

<p><strong>Giá trị Gamma</strong></p>

<p>Chỉ khả dụng khi bật “tham số độc lập”, dùng để thiết lập giá trị Gamma khi công cụ hoạt động. Nếu không chọn thì mục này sẽ bị ẩn.</p>

<p><strong>Độ lợi (Gain)</strong></p>

<p>Chỉ khả dụng khi bật “tham số độc lập”, dùng để thiết lập độ lợi của camera khi công cụ hoạt động. Nếu không chọn thì mục này sẽ bị ẩn.</p>

<p><strong>Chống lỗi vận hành</strong></p>

<p>Cho biết camera có bật chức năng chống lỗi vận hành hay không.</p>

<p><strong>Số lần chống lỗi</strong></p>

<p>Số lần thử lại khi bật chức năng chống lỗi.</p>

<p><strong>Thời gian chờ</strong></p>

<p>Giá trị -1 là chờ vô thời hạn, giá trị lớn hơn -1 là thời gian chờ (đơn vị: mili giây), giá trị tối đa là 10.000.</p>

<p><strong>Xoay ảnh</strong></p>

<p>Xử lý xoay ảnh được thu từ camera, gồm các tùy chọn: 0 độ, 90 độ, 180 độ, 270 độ. Trong đó 0 độ là không xử lý. Chức năng này bổ sung cho cài đặt xoay trong quản lý camera.</p>

<p><strong>Gương ảnh (lật ảnh)</strong></p>

<p>Xử lý lật ảnh được thu từ camera, gồm: không, ngang, dọc, ngang+dọc. “Không” nghĩa là không xử lý. Chức năng này bổ sung cho cài đặt lật ảnh trong quản lý camera.</p>

<p><strong>Ghi nhật ký thời gian</strong></p>

<p>Khi chọn mục này, quá trình bật đèn và thu ảnh sẽ được ghi lại trong nhật ký để hỗ trợ kiểm tra sự cố khi công cụ thực thi lâu.</p>

<p><strong>Xuất ảnh thang xám</strong></p>

<p>Chỉ khả dụng với camera RGB. Khi chọn, công cụ sẽ xuất ảnh RGB và đồng thời xuất thêm ảnh thang xám. Nếu không chọn, ảnh thang xám sẽ không được xuất.</p>

<ul>
<li><h4>Tệp</h4></li>
</ul>



<p><img src="media/GcImageSourceAdvanceTool_4_3.png" alt="GcImageSourceAdvanceTool_4_3" /></p>

<p><strong>Tệp cố định</strong></p>

<p>Chọn “Có” để cho phép thiết lập đường dẫn tệp ảnh; chọn “Không” thì không thể thiết lập đường dẫn, công cụ sẽ nạp ảnh từ đường dẫn tệp động.</p>

<p><strong>Đường dẫn tệp</strong></p>

<p>Đường dẫn đến ảnh được nạp từ máy tính cục bộ.</p>

<ul>
<li><h4>Thư mục</h4></li>
</ul>

<p><img src="media/GcImageSourceAdvanceTool_4_4.png" alt="GcImageSourceAdvanceTool_4_5" /></p>

<p><strong>Đường dẫn thư mục</strong></p>

<p>Đường dẫn thư mục chứa các ảnh cần nạp.</p>

<p><strong>Lọc theo từ khóa</strong></p>

<p>Dùng để lọc ảnh trong thư mục: nếu tên tệp ảnh chứa từ khóa thì ảnh sẽ được giữ lại, các ảnh khác sẽ bị loại bỏ.</p>

<ul>
<li><h4>Đèn chiếu sáng</h4></li>
</ul>

<p><img src="media/GcImageSourceAdvanceTool_4_5.png" alt="GcImageSourceAdvanceTool_4_5" /></p>

<p><strong>Số hiệu cổng</strong></p>

<p>Hiển thị danh sách các cổng <strong><em>không có giao thức</em></strong> hiện có, chọn cổng mà đèn chiếu sáng đang kết nối để điều khiển.</p>

<p><strong>Độ trễ</strong></p>

<p>Thiết lập khoảng thời gian trễ giữa thời điểm bật đèn và thời điểm camera chụp ảnh.</p>

<p><strong>Lệnh bật</strong></p>

<p>Lệnh gửi để bật đèn chiếu sáng.</p>

<p><strong>Lệnh tắt</strong></p>

<p>Lệnh gửi để tắt đèn chiếu sáng.</p>

<ul>
<li><h4>Trạng thái online/offline</h4></li>
</ul>



<p>Thông qua thao tác nút chuyển trạng thái online/offline trong thanh trạng thái của bảng điều khiển chính (như hình dưới), có thể thực hiện chuyển đổi giữa trạng thái online và offline của hệ thống. Nhấp vào “Online” để chuyển sang trạng thái online, nhấp vào “Offline” để chuyển sang trạng thái offline.</p>

<p><img src="media/GcImageSourceAdvanceTool_4_6.png" alt="GcImageSourceAdvanceTool_4_6" /></p>

<p>Hiển thị trên thanh trạng thái:</p>

<p><img src="media/GcImageSourceAdvanceTool_4_7.png" alt="GcImageSourceAdvanceTool_4_7" /></p>

<h2>5. Các vấn đề thường gặp</h2>

<table>
<thead>
<tr>
<th> Mô tả hiện tượng </th>
<th> Cách xử lý </th>
</tr>
</thead>
<tbody>
<tr>
<td> Ở trạng thái online, không lấy được ảnh </td>
<td> Kiểm tra trạng thái kết nối của camera; vào cửa sổ quản lý camera để kiểm tra có thể lấy ảnh bình thường không </td>
</tr>
<tr>
<td> Ở trạng thái online, đã bật đèn nhưng đèn không sáng </td>
<td> Kiểm tra xem cổng điều khiển đèn có hoạt động bình thường không; nếu cổng bình thường, hãy kiểm tra lại lệnh điều khiển đèn có đúng không </td>
</tr>
<tr>
<td> Lấy ảnh từ tệp tin thất bại </td>
<td> Kiểm tra đường dẫn ảnh đã được thiết lập chưa và tệp ảnh đã chọn có hợp lệ không </td>
</tr>
<tr>
<td> Lấy ảnh từ thư mục thất bại </td>
<td> Kiểm tra đường dẫn thư mục có đúng không và trong thư mục được chọn có ảnh hay không </td>
</tr>
</tbody>
</table>

<h2>6. Giải thích tham số</h2>

<h4>Tham số đầu vào</h4>

<table>
<thead>
<tr>
<th> Tên tham số </th>
<th> Mô tả tham số </th>
</tr>
</thead>
<tbody>
<tr>
<td> Tên camera </td>
<td> Tên (số serial) của camera dùng để chụp ảnh. </td>
</tr>
<tr>
<td> Có sử dụng tham số độc lập không </td>
<td> Nếu không sử dụng, công cụ sẽ dùng các tham số mặc định của camera để chụp ảnh; nếu có, người dùng cần tự thiết lập các giá trị như tăng cường (gain) và thời gian phơi sáng. </td>
</tr>
<tr>
<td> Gain </td>
<td> Khi sử dụng tham số độc lập, đây là mức tăng cường của camera, đơn vị dB. Chỉ khả dụng ở trạng thái online. </td>
</tr>
<tr>
<td> Gamma </td>
<td> Khi sử dụng tham số độc lập, đây là giá trị Gamma của camera. </td>
</tr>
<tr>
<td> Phơi sáng </td>
<td> Khi sử dụng tham số độc lập, đây là thời gian phơi sáng của camera, đơn vị mili giây. Chỉ khả dụng ở trạng thái online. </td>
</tr>
<tr>
<td> Có bật chế độ phòng lỗi không </td>
<td> Camera có bật chế độ chống lỗi hay không. </td>
</tr>
<tr>
<td> Số lần chống lỗi </td>
<td> Số lần thử lại khi chống lỗi; chỉ khả dụng khi bật chức năng chống lỗi. </td>
</tr>
<tr>
<td> Thời gian chờ chụp </td>
<td> Giá trị -1 là chờ vô hạn, giá trị lớn hơn -1 là thời gian chờ (tối đa 10000 ms). </td>
</tr>
<tr>
<td> Có xuất ảnh xám không </td>
<td> Khi dùng camera RGB, có thể chọn xuất ảnh xám cùng lúc với ảnh RGB. </td>
</tr>
<tr>
<td> Xoay ảnh </td>
<td> Xử lý xoay ảnh thu được từ camera: 0°, 90°, 180°, 270° (0° là không xoay). Chức năng này dựa trên cấu hình trong phần quản lý camera. </td>
</tr>
<tr>
<td> Gương ảnh </td>
<td> Xử lý gương ảnh thu được từ camera: Không, Ngang, Dọc, Ngang & Dọc (Không là không xử lý). Chức năng này cũng dựa trên phần quản lý camera. </td>
</tr>
<tr>
<td> Nguồn ảnh </td>
<td> Có thể chọn từ tệp hoặc thư mục. Chỉ khả dụng ở trạng thái offline. Chọn tệp thì công cụ nạp ảnh từ tệp; chọn thư mục thì công cụ nạp ảnh từ thư mục. </td>
</tr>
<tr>
<td> Tệp cố định </td>
<td> Khi nguồn ảnh là tệp: chọn Có để dùng đường dẫn cố định, chọn Không để dùng đường dẫn động. </td>
</tr>
<tr>
<td> Đường dẫn tệp </td>
<td> Đường dẫn ảnh được nạp. Chỉ hiện nếu chọn “Tệp cố định” là Có. </td>
</tr>
<tr>
<td> Đường dẫn thư mục </td>
<td> Khi nguồn ảnh là thư mục, đây là đường dẫn đến thư mục ảnh. </td>
</tr>
<tr>
<td> Từ khóa lọc </td>
<td> Khi nguồn ảnh là thư mục, dùng để lọc ảnh theo tên tệp: chỉ giữ lại các ảnh chứa từ khóa trong tên tệp. </td>
</tr>
<tr>
<td> Đường dẫn tệp động </td>
<td> Khi nguồn ảnh là tệp và không chọn đường dẫn cố định, đây là nơi thiết lập đường dẫn ảnh động. </td>
</tr>
</tbody>
</table>



<h4>Tham số đầu ra</h4>

<table>
<thead>
<tr>
<th> Tên tham số </th>
<th> Mô tả tham số </th>
</tr>
</thead>
<tbody>
<tr>
<td> Ảnh đầu ra </td>
<td> Ảnh xám đầu ra, bao gồm chiều dài, chiều rộng và kích thước điểm ảnh. </td>
</tr>
<tr>
<td> Ảnh RGB đầu ra </td>
<td> Ảnh màu đầu ra, bao gồm chiều dài, chiều rộng và kích thước điểm ảnh. </td>
</tr>
<tr>
<td> Ảnh độ sâu đầu ra </td>
<td> Ảnh độ sâu đầu ra, bao gồm chiều dài, chiều rộng và kích thước điểm ảnh. </td>
</tr>
<tr>
<td> Ảnh đường viền đầu ra </td>
<td> Ảnh đường viền đầu ra, bao gồm tổng số điểm và số điểm hợp lệ. </td>
</tr>
<tr>
<td> Tệp hiện tại </td>
<td> Tên đường dẫn của ảnh hiện tại; hiển thị khi nguồn ảnh là thư mục. </td>
</tr>
<tr>
<td> Tên tệp hiện tại </td>
<td> Tên ảnh hiện tại; hiển thị khi nguồn ảnh là thư mục. </td>
</tr>
<tr>
<td> Đã duyệt đến cuối </td>
<td> Đã duyệt đến cuối danh sách tệp hay chưa; hiển thị khi nguồn ảnh là thư mục. </td>
</tr>
<tr>
<td> Lệnh bật đèn </td>
<td> Chuỗi lệnh bật đèn đầu ra; chỉ hiển thị khi gửi lệnh thành công, nếu không sẽ trả về chuỗi rỗng. </td>
</tr>
<tr>
<td> Kết quả thực thi </td>
<td> Kết quả thực thi của công cụ. </td>
</tr>
<tr>
<td> Thời gian thực thi </td>
<td> Thời gian thực thi của công cụ. </td>
</tr>
</tbody>
</table>

<h2>7. Dự án mẫu</h2>

<p> Tham khảo tại “\Samples\图像源工具.gvp”. </p>
