<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>加密狗SOP及故障排查手册</h1>

<h2>1. 适用加密狗</h2>

<table>
<thead>
<tr>
<th> 厂商  </th>
<th> 匹配产品</th>
<th> 临时狗（限时狗</th>
<th> 永久狗（产品狗) </th>
<th> 驱动名称 </th>
</tr>
</thead>
<tbody>
<tr>
<td> Sense </td>
<td> 仅支持VISIONAssembly6.3.200及之后的版本 </td>
<td> <img src="media/1-1.jpg" alt="" /> </td>
<td> <img src="media/1-2.png" alt="" /> </td>
<td> sense_shield_installer_pub_XXXX.exe </td>
</tr>
</tbody>
</table>


<p>加密狗序号与权限一览</p>

<table>
<thead>
<tr>
<th> 编号  </th>
<th> 名称                                                   </th>
</tr>
</thead>
<tbody>
<tr>
<td> 1-7   </td>
<td> 基础功能，包括查找、定位、检测、二维测量、标定、读码等 </td>
</tr>
<tr>
<td> 17-18 </td>
<td> 3D功能                                                 </td>
</tr>
<tr>
<td> 19    </td>
<td> 深度学习                                               </td>
</tr>
<tr>
<td> 20    </td>
<td> OCR                                                    </td>
</tr>
<tr>
<td> 100   </td>
<td> VisionAssembly产品权限                                 </td>
</tr>
<tr>
<td> 101   </td>
<td> VisionLASER产品权限                                    </td>
</tr>
<tr>
<td> 188   </td>
<td> 工程与项目加密绑定授权                                 </td>
</tr>
</tbody>
</table>


<h2>2. Sense</h2>

<h3>2.1 常用操作</h3>

<h4>1)  加密狗查看工具</h4>

<p>第一步：进入VA安装路径，双击打开“加密狗查看工具.exe”（用于查看加密狗SN、固件版本、权限、到期时间、错误码等）</p>

<p>第二步：点击左侧功能区“硬件锁”，“本地加密锁”即显示当前连接的加密狗的SN（此SN可用于回传管理员，进行远程升级）</p>

<p>第三步：选择需要查看的加密狗，右侧显示详细信息</p>

<ul>
<li><p>固件版本：方便提供给研发端，进行问题排查</p></li>
<li><p>许可情况总览：可查看所有许可、正常许可、已过期许可的情况</p></li>
</ul>


<p><img src="media/2-1.jpg" alt="" /></p>

<p>第四步：点击左侧功能区“我的软件”，点击右上角<img src="media/wps181.jpg" alt="" />查看许可授权的具体情况，如下，</p>

<p><img src="media/2-2.jpg" alt="" /></p>

<ul>
<li><p>17-3D：表示授权模块为17号权限，功能描述为“支持3D功能”</p>

<p><img src="media/2-3.jpg" alt="" />：过期</p>

<p><img src="media/2-4.jpg" alt="" />：正常</p></li>
<li><p>详情：可查看许可状态、许可开始/结束时间、初次使用时间、时间跨度、剩余次数等详细信息，如下图，</p></li>
</ul>


<p><img src="media/2-5.jpg" alt="" /></p>

<p>​ 还可通过左下角“高级”查询错误码，错误码清单详见<span style="background:pink">2.1-3）加密狗报错清单。</span></p>

<h4>2)  加密狗远程升级</h4>

<p><img src="media/2-6.jpg" alt="" /></p>

<p>第一步：按照<span style="background:pink">2.1-1）加密狗查看工具。</span>查询到加密狗SN，告知管理员</p>

<p>第二步：得到管理员发回的d2c升级文件，拷贝到已插入待升级加密狗的电脑上</p>

<p>第三步：双击d2c文件，弹出如下界面，显示“数据包升级成功！”表示升级成功，点击“关闭”即可</p>

<p><img src="media/2-7.jpg" alt="" /></p>

<h4>3)  加密狗报错清单</h4>

<table>
<thead>
<tr>
<th> 错误码     </th>
<th> 描述      </th>
<th>                                                              </th>
</tr>
</thead>
<tbody>
<tr>
<td> 0x00000000 </td>
<td> 0         </td>
<td> 成功                                                         </td>
</tr>
<tr>
<td> 0x00000002 </td>
<td> 2         </td>
<td> 输入参数错误                                                 </td>
</tr>
<tr>
<td> 0x00000003 </td>
<td> 3         </td>
<td> 内存空间不足                                                 </td>
</tr>
<tr>
<td> 0x00000004 </td>
<td> 4         </td>
<td> 缓冲区大小不足                                               </td>
</tr>
<tr>
<td> 0x00000008 </td>
<td> 8         </td>
<td> 无效的句柄                                                   </td>
</tr>
<tr>
<td> 0x00000009 </td>
<td> 9         </td>
<td> 操作超时                                                     </td>
</tr>
<tr>
<td> 0x00000010 </td>
<td> 16        </td>
<td> 不支持的操作，可能是版本过低                                 </td>
</tr>
<tr>
<td> 0x00000040 </td>
<td> 64        </td>
<td> 网络错误                                                     </td>
</tr>
<tr>
<td> 0x00000044 </td>
<td> 68        </td>
<td> 当前控制锁不支持PIN码功能，请向销售或技术服务人员申请更换控制锁 </td>
</tr>
<tr>
<td> 0x00000045 </td>
<td> 69        </td>
<td> 开发锁仍然使用初始 PIN码，请修改初始 PIN 码                  </td>
</tr>
<tr>
<td> 0x00000047 </td>
<td> 71        </td>
<td> 开发锁或 API 版本太低，需要更换开发锁或升级 SDK              </td>
</tr>
<tr>
<td> 0x00000048 </td>
<td> 72        </td>
<td> 输入的 PIN 码错误                                            </td>
</tr>
<tr>
<td> 0x00000049 </td>
<td> 73        </td>
<td> PIN 码被锁定，请联系技术服务人员解决                         </td>
</tr>
<tr>
<td> 0x01000071 </td>
<td> 16777329  </td>
<td> 许可升级包损坏                                               </td>
</tr>
<tr>
<td> 0x01000072 </td>
<td> 16777330  </td>
<td> 许可升级包版本过低                                           </td>
</tr>
<tr>
<td> 0x02000002 </td>
<td> 33554434  </td>
<td> IPC 收发错误                                                 </td>
</tr>
<tr>
<td> 0x02000003 </td>
<td> 33554435  </td>
<td> 连接失败，指连接软件链接 Virbox 许可服务失败（本地服务）     </td>
</tr>
<tr>
<td> 0x05000004 </td>
<td> 83886084  </td>
<td> 找不到服务器                                                 </td>
</tr>
<tr>
<td> 0x05000006 </td>
<td> 83886086  </td>
<td> 登录的许可句柄数量已达到上线（上线为128）                    </td>
</tr>
<tr>
<td> 0x0500000D </td>
<td> 83886093  </td>
<td> 系统操作失败                                                 </td>
</tr>
<tr>
<td> 0x05000013 </td>
<td> 83886099  </td>
<td> 白名单触发                                                   </td>
</tr>
<tr>
<td> 0x05000014 </td>
<td> 83886100  </td>
<td> 黑名单触发                                                   </td>
</tr>
<tr>
<td> 0x0500001F </td>
<td> 83886111  </td>
<td> 没有找到加密锁，请确保加密锁正常插入                         </td>
</tr>
<tr>
<td> 0x13000001 </td>
<td> 318767105 </td>
<td> 开发商证书已存在加密锁中。若许可可以正常下载到加密锁中，此错误可忽略 </td>
</tr>
<tr>
<td> 0x13000003 </td>
<td> 318767107 </td>
<td> 解析用户锁的设备证书失败                                     </td>
</tr>
<tr>
<td> 0x13000005 </td>
<td> 318767109 </td>
<td> 错误的数据相应                                               </td>
</tr>
<tr>
<td> 0x13000007 </td>
<td> 318767111 </td>
<td> 未调用 Runtime 初始化函数，请先调用 slm_init 初始化函数，再调用此接口 </td>
</tr>
<tr>
<td> 0x13000009 </td>
<td> 318767113 </td>
<td> Runtime 库版本不匹配，请升级 SDK 开发库                      </td>
</tr>
<tr>
<td> 0x13000020 </td>
<td> 318767136 </td>
<td> 许可未找到，请确保指定的许可可以被访问到（本地硬件锁许可，网络硬件锁许可，云许可，软许可） </td>
</tr>
<tr>
<td> 0x13000021 </td>
<td> 318767137 </td>
<td> 认证错误。请联系 技术服务人员 解决                           </td>
</tr>
<tr>
<td> 0x13000022 </td>
<td> 318767138 </td>
<td> 认证错误。请联系 技术服务人员 解决                           </td>
</tr>
<tr>
<td> 0x13000024 </td>
<td> 318767140 </td>
<td> 用户数据区太小                                               </td>
</tr>
<tr>
<td> 0x13000025 </td>
<td> 318767141 </td>
<td> 无效的 LM 请求                                               </td>
</tr>
<tr>
<td> 0x13000027 </td>
<td> 318767143 </td>
<td> 错误的 D2C 升级包                                            </td>
</tr>
<tr>
<td> 0x13000028 </td>
<td> 318767144 </td>
<td> 访问云许可或云平台时返回的数据错误                           </td>
</tr>
<tr>
<td> 0x13000029 </td>
<td> 318767145 </td>
<td> 读写的数据过大                                               </td>
</tr>
<tr>
<td> 0x13000030 </td>
<td> 318767152 </td>
<td> 没有登录的用户                                               </td>
</tr>
<tr>
<td> 0x13000037 </td>
<td> 318767159 </td>
<td> 许可模块不存在，用此错误码判断当前功能模块是否支持           </td>
</tr>
<tr>
<td> 0x13000038 </td>
<td> 318767160 </td>
<td> 错误的开发商 API 密码                                        </td>
</tr>
<tr>
<td> 0x1300003A </td>
<td> 318767162 </td>
<td> 账号登录会话时效，请重新登录用户账号                         </td>
</tr>
<tr>
<td> 0x13000051 </td>
<td> 318767185 </td>
<td> 许可需要联网激活                                             </td>
</tr>
<tr>
<td> 0x24000008 </td>
<td> 603979784 </td>
<td> 发现软件被调试                                               </td>
</tr>
<tr>
<td> 0x2400000D </td>
<td> 603979789 </td>
<td> 无效的 Session（当前许可的会话失效，可能许可登录已经退出或被强行踢出） </td>
</tr>
<tr>
<td> 0x2400000E </td>
<td> 603979790 </td>
<td> Session 已被删除（当前许可的会话失效，可能许可登录已经退出或被强行踢出） </td>
</tr>
<tr>
<td> 0x2400000F </td>
<td> 603979791 </td>
<td> 许可已经过期（许可在访问过程中过期）                         </td>
</tr>
<tr>
<td> 0x24000010 </td>
<td> 603979792 </td>
<td> Session 超时（访问加密锁的会话超时了）                       </td>
</tr>
<tr>
<td> 0x24000015 </td>
<td> 603979797 </td>
<td> 许可不允许远程登录（当前许可是本地许可，却被远程机器访问了） </td>
</tr>
<tr>
<td> 0x22000001 </td>
<td> 570425345 </td>
<td> 文件名称无效，可能指定的文件名称在锁内并不存在               </td>
</tr>
<tr>
<td> 0x22000006 </td>
<td> 570425350 </td>
<td> 锁内创建文件长度出错，可能是我们在锁内创建的文件太大，超出了锁内剩余空间大小 </td>
</tr>
<tr>
<td> 0x22000007 </td>
<td> 570425351 </td>
<td> 锁内文件写数据出错，可能是没有写入权限                       </td>
</tr>
<tr>
<td> 0x22000008 </td>
<td> 570425352 </td>
<td> 许可信息数据错误。可能是许可访问数据被篡改。请联系 技术服务人员 解决 </td>
</tr>
<tr>
<td> 0x22000009 </td>
<td> 570425353 </td>
<td> 许可信息数据错误。可能是许可访问数据被篡改。请联系 技术服务人员 解决 </td>
</tr>
<tr>
<td> 0x2200000B </td>
<td> 570425355 </td>
<td> 在更新或删除锁内某条许可的时候，锁内并没有找到对应的许可     </td>
</tr>
<tr>
<td> 0x2200000D </td>
<td> 570425357 </td>
<td> 当前许可号不能被操作，可能是操作了 0号许可                   </td>
</tr>
<tr>
<td> 0x2200000E </td>
<td> 570425358 </td>
<td> 所有许可被禁用（0号许可被禁用）                              </td>
</tr>
<tr>
<td> 0x2200000F </td>
<td> 570425359 </td>
<td> 当前许可被禁用。升级了许可禁用升级包造成的，也称之为许可吊销 </td>
</tr>
<tr>
<td> 0x22000011 </td>
<td> 570425361 </td>
<td> 许可尚不可用，一般是指许可没有达到可使用的时间（对于设置了起始时间的许可可能会返回此错误） </td>
</tr>
<tr>
<td> 0x22000012 </td>
<td> 570425362 </td>
<td> 许可已经到期（许可已经超过设定的结束时间，或时间跨度已经用尽） </td>
</tr>
<tr>
<td> 0x22000014 </td>
<td> 570425364 </td>
<td> 许可登录次数用尽                                             </td>
</tr>
<tr>
<td> 0x22000015 </td>
<td> 570425365 </td>
<td> 许可已达到最大并发数（网络授权的并发数达到最大值，新的登录将失败） </td>
</tr>
<tr>
<td> 0x22000017 </td>
<td> 570425367 </td>
<td> 锁内已经达到最大会话数量                                     </td>
</tr>
<tr>
<td> 0x2200001A </td>
<td> 570425370 </td>
<td> 没有足够的共享内存。锁内共享内存大小为 256byte，可能是操作的数据过大 </td>
</tr>
<tr>
<td> 0x2200001C </td>
<td> 570425372 </td>
<td> 错误的数据文件长度                                           </td>
</tr>
<tr>
<td> 0x2200001E </td>
<td> 570425374 </td>
<td> 找不到对应的许可数据文件。可能是许可并没有设置数据区，但是我们却准备操作数据区 </td>
</tr>
<tr>
<td> 0x2200001F </td>
<td> 570425375 </td>
<td> 远程升级包类型错误                                           </td>
</tr>
<tr>
<td> 0x22000020 </td>
<td> 570425376 </td>
<td> 时间戳错误的远程升级包（D2C 升级包）                         </td>
</tr>
<tr>
<td> 0x22000021 </td>
<td> 570425377 </td>
<td> 序列号错误的远程升级包（D2C 升级包）                         </td>
</tr>
<tr>
<td> 0x22000022 </td>
<td> 570425378 </td>
<td> 添加的许可已经存在，若要覆盖已有许可，请在签发许可的时候选择“强制添加” </td>
</tr>
<tr>
<td> 0x22000023 </td>
<td> 570425379 </td>
<td> 许可数量受限                                                 </td>
</tr>
<tr>
<td> 0x22000024 </td>
<td> 570425380 </td>
<td> 无效的许可数据文件偏移                                       </td>
</tr>
<tr>
<td> 0x2200002C </td>
<td> 570425388 </td>
<td> 许可会话已退出登录                                           </td>
</tr>
<tr>
<td> 0x22000031 </td>
<td> 570425393 </td>
<td> 设置的用户数据区类型字段错误                                 </td>
</tr>
<tr>
<td> 0x22000032 </td>
<td> 570425394 </td>
<td> 设置的用户数据区长度过大                                     </td>
</tr>
<tr>
<td> 0x22000034 </td>
<td> 570425396 </td>
<td> 所有许可时间到期（0号许可已经到期）                          </td>
</tr>
<tr>
<td> 0x22000038 </td>
<td> 570425400 </td>
<td> 远程升级失败。许可升级错误，若多次尝试依旧失败，请联系 技术服务人员 解决 </td>
</tr>
<tr>
<td> 0x2200003C </td>
<td> 570425404 </td>
<td> 加密数据长度不对齐                                           </td>
</tr>
<tr>
<td> 0x2200003D </td>
<td> 570425405 </td>
<td> 加密数据错误                                                 </td>
</tr>
<tr>
<td> 0x2200003E </td>
<td> 570425406 </td>
<td> 不支持短码升级                                               </td>
</tr>
<tr>
<td> 0x22000040 </td>
<td> 570425408 </td>
<td> 用户数据区不存在（当前许可并没有设置数据区）                 </td>
</tr>
<tr>
<td> 0x22000050 </td>
<td> 570425424 </td>
<td> 找不到文件，可能指定的文件名称在锁内并不存在                 </td>
</tr>
<tr>
<td> 0x22000059 </td>
<td> 570425433 </td>
<td> 无效的开发商ID，可能是加密锁异常了，请联系 技术服务人员 解决 </td>
</tr>
<tr>
<td> 0x2200005D </td>
<td> 570425437 </td>
<td> 升级包许可数量过大                                           </td>
</tr>
<tr>
<td> 0x2200005F </td>
<td> 570425439 </td>
<td> 用户锁被锁定（您可能有些操作锁定了加密锁，无法解锁，请联系软件供应商解决） </td>
</tr>
<tr>
<td> 0x22000062 </td>
<td> 570425442 </td>
<td> 无效的短码升级交互文件                                       </td>
</tr>
<tr>
<td> 0x22000063 </td>
<td> 570425443 </td>
<td> 短码升级用户数据区错误                                       </td>
</tr>
<tr>
<td> 0x22000064 </td>
<td> 570425444 </td>
<td> 错误的开发锁签名版本，需要更换为新的用户锁，请联系软件供应商或者 技术服务人员 解决 </td>
</tr>
<tr>
<td> 0x22000065 </td>
<td> 570425445 </td>
<td> 错误的开发锁签名数据，需使用新的开发锁签包，请联系 技术服务人员 解决 </td>
</tr>
</tbody>
</table>


<h4>4)  加密狗日志回传</h4>

<p>为更方便的定位加密狗问题，需要用户找到并回传加密狗的日志，方法如下：将C:\Program Files (x86)\senseshield\ss路径下的log文件夹及install.log文件一并发回</p>

<p><img src="media/2-8.jpg" alt="" /></p>

<p>如果提示log在占用，无法直接压缩，可将log文件夹拷到别处，再压缩回传。</p>

<h4>5)  加密狗修复工具</h4>

<p>第一步：进入VA安装路径，以<span style="color:red;background:pink"><strong>管理员权限</strong></span>打开“加密狗修复工具.exe”</p>

<p>第二步：关闭杀毒软件、安全卫士等软件。点击“一键检测修复”，可有效检测如下常见问题</p>

<p><img src="media/2-9.jpg" alt="" /></p>

<p>第三步：检测结果如下，说明没有此类问题，需要反馈给研发</p>

<p><img src="media/2-10.jpg" alt="" /></p>

<h4>6)  显示/隐藏系统托盘</h4>

<p>正常情况下，VA软件安装时，会主动安装加密狗驱动（当驱动版本一致时，不再重复安装），此时是静默安装，用户无感知，也没有系统托盘（电脑桌面右下角显示的小图标<img src="media/2-11.jpg" alt="" />）。</p>

<p>如果客户想显示系统托盘，或显示了系统托盘后又想隐藏，可以通过修改配置文件来控制。</p>

<p>S1：找到C:\ProgramData\senseshield\ss\config.ini并打开</p>

<p>S2：找到如下位置，将值改为需要的值即可（1：隐藏，0：显示）</p>

<p><img src="media/2-12.jpg" alt="" /></p>

<h3>2.2 故障排查</h3>

<h4>1)  没有插入加密狗或加密狗权限不足</h4>

<p><span style="color:blue"><span style="color:blue"><strong>现象：</strong></span></span>打开软件时，报错“没有插入加密狗或加密狗权限不足，点击确定退出软件。”</p>

<p><img src="media/3-1.jpg" alt="" /></p>

<p><span style="color:blue"><strong>原因及解决方案：</strong></span></p>

<ul>
<li><p>没有插入加密狗：插入加密狗即可解决</p></li>
<li><p>加密狗权限不足：使用<span style="background:pink">2.1-1）加密狗查看工具</span>进行权限查询，若为权限不足，使用<span style="background:pink">2.1-2）加密狗远程升级</span>进行远程升级</p></li>
<li><p>未安装新版加密狗驱动：使用<span style="background:pink">2.1-5）加密狗修复工具</span>查看驱动是否安装正常可用</p></li>
</ul>


<h4>2)  错误码13000020：找不到许可</h4>

<p><span style="color:blue"><span style="color:blue"><strong>现象：</strong></span></span>软件使用过程中，突然报错如下：</p>

<p><img src="media/3-2.jpg" alt="" /></p>

<p><span style="color:blue"><strong>原因及解决方案：</strong></span></p>

<ul>
<li><p>加密狗掉线：检查加密狗的连接状态或按<span style="background:pink">2.1-5）加密狗修复工具</span>进行检测修复</p></li>
<li><p>加密狗某权限到期：使用<span style="background:pink">2.1-1）加密狗查看工具</span>进行权限查询，如权限到期，按<span style="background:pink">2.1-2）加密狗远程升级</span>进行远程升级</p></li>
</ul>


<h4>3)  加密狗到期提醒</h4>

<p><span style="color:blue"><span style="color:blue"><strong>现象：</strong></span></span>软件打开或使用过程中，报错“剩余使用时间：X天”</p>

<p><img src="media/3-3.jpg" alt="" /></p>

<p><span style="color:blue"><strong>原因及解决方案：</strong></span>软件中做了到期提醒，当剩余使用时间不足10天时，打开软件就会提醒，正常使用中不再提醒，直到到期前会再次提醒。使用<span style="background:pink">2.1-2）加密狗远程升级</span>进行远程升级</p>

<h4>4)  加密狗驱动安装错误</h4>

<p><span style="color:blue"><strong>现象：</strong></span>安装VA安装包时，最后会静默安装加密狗驱动，当安装加密狗驱动返回异常时，会报错中止安装过程</p>

<p>(1) 返回值：4：</p>

<p><img src="media/3-4.jpg" alt="" /></p>

<p>(2) 返回值：5：</p>

<p><img src="media/3-5.jpg" alt="" /></p>

<p>(3) 返回值：6：</p>

<p><img src="media/3-6.jpg" alt="" /></p>

<p>(4) 返回值：7：</p>

<p><img src="media/3-7.jpg" alt="" /></p>

<p>(5) 返回值：8：</p>

<p><img src="media/3-8.jpg" alt="" /></p>

<p>(6) 返回值：50：</p>

<p><img src="media/3-9.jpg" alt="" /></p>

<p>(7) 返回值：55：</p>

<p><img src="media/3-10.jpg" alt="" /></p>

<p><span style="color:blue"><span style="color:blue"><strong>原因及解决方案：</strong></span></span></p>

<p><strong>(1) 返回值：4</strong>，已存在加密狗驱动进程，手动终止进程或重启电脑，再重装软件！</p>

<p>不明原因导致加密狗驱动安装进程未正常结束关闭，需要手动终止进程或重启电脑后，尝试重装软件！</p>

<p><strong>(2) 返回值：5</strong>，加密狗驱动安装文件丢失，请确认关闭安全卫士、杀毒软件等，再重装软件！</p>

<p>加密狗驱动安装文件在安装时，可能被360、腾讯电脑管家、2345等安全卫士、杀毒软件、桌面小助手一系列软件拦截，关闭此类软件后，尝试重装软件。</p>

<p><strong>(3) 返回值：6</strong>，驱动安装失败，请确认关闭安全卫士、杀毒软件等，再重装软件！</p>

<p>加密狗驱动安装文件在安装时，可能被360、腾讯电脑管家、2345等安全卫士、杀毒软件、桌面小助手一系列软件拦截，关闭此类软件后，尝试重装软件。</p>

<p><strong>(4) 返回值：7\8\50\55</strong>，加密狗驱动或服务安装失败，请联系凌云光！</p>

<p>可先按照<span style="background:pink">2.1-5）加密狗修复工具</span>进行检测修复，修复后再次尝试重装软件；如果仍无法安装成功，联系研发。</p>
