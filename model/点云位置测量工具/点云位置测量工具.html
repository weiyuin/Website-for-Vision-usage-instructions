<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>点云位置测量工具</h1>

<h2>功能</h2>

<p>对深度图像中检测区域内某一特征类型的深度数据进行定位，图1所示为检测区域内Z最大的特征点。</p>

<p><img src="media/wps87.jpg" alt="img" /><img src="media/wps88.jpg" alt="img" /></p>

<p><imgnote>图1 点云位置测量工具示意图</imgnote></p>

<h2>参数</h2>

<table>
<thead>
<tr>
<th>分类 </th>
<th> 参数名称     </th>
<th> 参数描述                                                                                                    </th>
</tr>
</thead>
<tbody>
<tr>
<td> 属性窗口     </td>
<td> ROI生成方式                                                  </td>
<td> 分为3种：定位、固定ROI、参考点。其中，定位模式：ROI可以跟随二维线性变换而变化；固定ROI模式：ROI位置不变；参考点模式：根据参考点线建立产品坐标系，再固定偏移生成ROI。 </td>
</tr>
<tr>
<td>  </td>
<td> ROI类型 </td>
<td> 检测区域，分为3种：整幅图像、矩形、仿射矩形。 </td>
</tr>
<tr>
<td></td>
<td> 特征类型     </td>
<td> 根据深度数据特征类型获取特征点的三维坐标信息。<img src="media/wps90.jpg" alt="img" />                                                </td>
</tr>
<tr>
<td></td>
<td> 区间上、下限 </td>
<td> 测量区域的深度数据按照Z分量从小到大排序，然后再获取位于start% ~ end%的深度数据的均值，中值等特征点。取值范围为下限[0,100)，上限(0,100]，且下限小于上限。<img src="media/wps91.jpg" alt="img" />                                                </td>
</tr>
<tr>
<td></td>
<td> 启用高低尾部计算 </td>
<td> 选择“是”，则进行直方图统计计算低尾部、高尾部。 </td>
</tr>
<tr>
<td></td>
<td> 低尾部分数 </td>
<td> 计算低尾部的比例参数，取值范围为 [0,1]，且高低尾部分数之和小于等于1，参考监视窗口低尾部参数。 </td>
</tr>
<tr>
<td></td>
<td> 高尾部分数 </td>
<td> 计算高尾部的比例参数，取值范围为 [0,1]，参考监视窗口低尾部参数，且高低尾部分数之和小于等于1，参考监视窗口高尾部参数。 </td>
</tr>
<tr>
<td> 图像窗口     </td>
<td> 深度图像                                                     </td>
<td> 显示待检测的深度图像，显示为伪彩色图像。      </td>
</tr>
<tr>
<td></td>
<td> 检测区域     </td>
<td> 在图像上显示检测区域。                                                                                      </td>
</tr>
<tr>
<td> 数据链       </td>
<td> 输入深度图像                                                 </td>
<td> 输入待检测的深度图像。                        </td>
</tr>
<tr>
<td></td>
<td> 二维线性变换 </td>
<td> 目标相对于模板的平移、旋转、缩放变换。                                                                      </td>
</tr>
<tr>
<td>高级界面</td>
<td> 无    </td>
<td> 无                                                                                                          </td>
</tr>
</tbody>
</table>


<h2>输出</h2>

<table>
<thead>
<tr>
<th>分类 </th>
<th> 参数名称 </th>
<th> 参数描述                                                                                  </th>
</tr>
</thead>
<tbody>
<tr>
<td> 监视窗口 </td>
<td> 输入深度图像                                </td>
<td> 输入图像的长宽和像素大小，以及深度数据参数。 </td>
</tr>
<tr>
<td></td>
<td> 特征点   </td>
<td> 检测区域内特征点的三维坐标信息。                                                          </td>
</tr>
<tr>
<td></td>
<td> 特征点集 </td>
<td> 检测区域内的所有点。<img src="media/wps93.jpg" alt="img" />                                               </td>
</tr>
<tr>
<td></td>
<td> 执行结果 </td>
<td> 工具执行结果。                                                                            </td>
</tr>
<tr>
<td></td>
<td> 执行时间 </td>
<td> 工具执行时间。                                                                            </td>
</tr>
<tr>
<td> 图像窗口 </td>
<td> 输入深度图像                                </td>
<td> 显示检测的深度图像，显示为伪彩色图像。       </td>
</tr>
<tr>
<td></td>
<td> 特征点   </td>
<td> 显示特征点结果。                                                                          </td>
</tr>
<tr>
<td>数据链</td>
<td> 数据链   </td>
<td> 同监视窗口参数，供后续工具使用。                             </td>
</tr>
</tbody>
</table>


<h2>详细说明</h2>

<h3>测量区间</h3>

<p>设区间范围为[start%, end%]，则只有位于区间范围内的数据才是有效的；如图2所示，当对测量区域进行参数配置时，将区域内的深度数据按照Z分量从小到大进行排序，然后再获取位于start% ~ end%的深度数据的均值，中值等特征点。</p>

<p><img src="media/wps95.png" alt="img" /></p>

<p><imgnote>图2 区间示意图</imgnote></p>

<h3>使用向导</h3>

<p><strong>Step 1 设置检测区域和深度数据特征类型</strong></p>

<p>为了获取深度数据中的特征点三维坐标信息，需要设置检测区域和深度数据特征类型。其中，检测区域有3种：整幅图像、矩形，仿射矩形，而深度数据特征类型有9种：均值、中值、质心、X最大、X最小、Y最大、Y最小、Z最大、Z最小。</p>

<p>均值：检测区域内所有深度数据坐标（X,Y,Z）的均值。</p>

<p>中值：检测区域内所有深度数据坐标（X,Y,Z）的中值。</p>

<p>质心：检测区域内所有深度数据坐标（X,Y,Z）的质心。</p>

<p>X最大值：检测区域内所有深度数据坐标（X,Y,Z）中X坐标最大所对应的深度数据的坐标信息。</p>

<p>X最小值：检测区域内所有深度数据坐标（X,Y,Z）中X坐标最小所对应的深度数据的坐标信息。</p>

<p>Y最大值：检测区域内所有深度数据坐标（X,Y,Z）中Y坐标最大所对应的深度数据的坐标信息。</p>

<p>Y最小值：检测区域内所有深度数据坐标（X,Y,Z）中Y坐标最小所对应的深度数据的坐标信息。</p>

<p>Z最大值：检测区域内所有深度数据坐标（X,Y,Z）中Z坐标最大所对应的深度数据的坐标信息。</p>

<p>Z最小值：检测区域内所有深度数据坐标（X,Y,Z）中Z坐标最小所对应的深度数据的坐标信息。</p>

<p><strong>Step 2 执行测量和输出结果</strong></p>

<p>在设置好检测区域，深度数据特征类型之后，就可以执行测量了。输出的结果为特征点的三维坐标信息。</p>

<h2>注意</h2>

<ul>
<li><p>区间上下限参数，仅在特征类型选择均值、中值、质心、Z最大、Z最小和所有数据时有效，选择X最大、X最小、Y最大、Y最小时无效。</p></li>
<li><p>当特征类型选择所有数据时，输出参数特征点集为指定区间内的所有数据点；当特征类型选择其他类型时，特征点集中仅包含一个点，及输出参数特征点。</p></li>
</ul>


<h2>示例工程</h2>

<p>参见“\Samples\3D\深度图\3D测量工具.gvp”。</p>
