<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>点匹配工具</h1>

<h2>功能</h2>

<p>点匹配工具是进行二维点集的定位或匹配。通过在实时点集中寻找与训练点集具有相似模式的一个或多个结果，匹配结果包括变换后的训练点集、训练点集和实时点集之间的匹配关系。其应用效果如图1所示。</p>

<p><img src="media/wps57.jpg" alt="img" /></p>

<p><imgnote>(a) 训练点集及实时点集分布</imgnote></p>

<p><img src="media/wps58.jpg" alt="img" /></p>

<p> <imgnote>(b) 工具结果</imgnote></p>

<p><imgnote>图1 点匹配工具应用示意图</imgnote></p>

<h2>参数</h2>

<table>
<thead>
<tr>
<th>分类</th>
<th>                                                 参数名称                                                                   </th>
<th> 参数描述 </th>
</tr>
</thead>
<tbody>
<tr>
<td>属性窗口</td>
<td> 是否自动设置网格化尺寸                                       </td>
<td> 控制网格化尺寸自动设置或手动设置。                                                                                         </td>
</tr>
<tr>
<td></td>
<td> 网格化尺寸           </td>
<td> 指实际点集变换到网格化点集的尺寸。                                                                                         </td>
</tr>
<tr>
<td></td>
<td> 是否自动设置旋转步长 </td>
<td> 控制旋转步长自动设置或手动设置。                                                                                           </td>
</tr>
<tr>
<td></td>
<td> 旋转步长             </td>
<td> 进行点匹配过程中在旋转维度搜索时遍历过程的步长，单位为度。                                                                 </td>
</tr>
<tr>
<td></td>
<td> 是否自动设置缩放步长 </td>
<td> 控制缩放步长自动设置或手动设置。                                                                                           </td>
</tr>
<tr>
<td></td>
<td> 缩放步长             </td>
<td> 进行点匹配过程中在缩放维度搜索时遍历过程的步长，单位为1。                                                                  </td>
</tr>
<tr>
<td></td>
<td> 结果个数             </td>
<td> 训练点与实时点中匹配存在几种模式，默认为1。                                                                                </td>
</tr>
<tr>
<td></td>
<td> 最小覆盖率           </td>
<td> 对得到结果覆盖率最小值的限定。<img src="media/wps60.jpg" alt="img" />                                                                      </td>
</tr>
<tr>
<td></td>
<td> 是否自动设置捕获半径 </td>
<td> 控制捕获半径自动设置或手动设置。                                                                                           </td>
</tr>
<tr>
<td></td>
<td> 捕获半径             </td>
<td> 训练点与实时点匹配时两点相距的最大距离。<img src="media/wps61.jpg" alt="img" />                                                               </td>
</tr>
<tr>
<td></td>
<td> 是否开启缩放         </td>
<td> 控制是否开启缩放搜索范围。                                                                                                 </td>
</tr>
<tr>
<td></td>
<td> 缩放搜索范围         </td>
<td> 点匹配工具可以进行缩放维度的搜索。                                                                                         </td>
</tr>
<tr>
<td></td>
<td> 旋转搜索范围         </td>
<td> 点匹配工具可以进行旋转维度的搜索，需输入搜索范围，比如-180°~180°。                                                               </td>
</tr>
<tr>
<td></td>
<td> 是否X方向全范围搜索  </td>
<td> X方向，训练点集需要平移搜索的范围，可选择是否进行全范围搜索。若为全范围搜索，算法会根据变换训练点集和实时点集进行计算。若为手动设置，其设置值为与实时点集质心位置的相对值。                                                               </td>
</tr>
<tr>
<td></td>
<td> X方向搜索范围        </td>
<td> 输入X方向，训练点集需要平移搜索的范围。                                                                                    </td>
</tr>
<tr>
<td></td>
<td> 是否Y方向全范围搜索  </td>
<td> Y方向，训练点集需要平移搜索的范围，可选择是否进行全范围搜索。若为全范围搜索，算法会根据变换训练点集和实时点集进行计算。若为手动设置，其设置值为与实时点集质心位置的相对值。                                                               </td>
</tr>
<tr>
<td></td>
<td> Y方向搜索范围        </td>
<td> 输入Y方向，训练点集需要平移搜索的范围。                                                                                    </td>
</tr>
<tr>
<td></td>
<td> 结果索引             </td>
<td> 输入结果的索引号。                                                                                                         </td>
</tr>
<tr>
<td>图像窗口</td>
<td> 训练点集显示位置                                             </td>
<td> 显示训练点集。                                                                                                             </td>
</tr>
<tr>
<td></td>
<td> 实时点集显示位置     </td>
<td> 显示实时点集。                                                                                                             </td>
</tr>
<tr>
<td></td>
<td> 背景图像             </td>
<td> 显示背景图像。                                                                                                             </td>
</tr>
<tr>
<td></td>
<td> 数据链               </td>
<td> 训练点集                                                     </td>
</tr>
<tr>
<td></td>
<td> 实时点集             </td>
<td> 输入实时点集。                                                                                                             </td>
</tr>
<tr>
<td> 高级界面             </td>
<td> 自动设置网格化尺寸                                           </td>
<td> 控制网格化尺寸自动设置或手动设置，同属性窗口的是否自动设置网格化尺寸参数。 </td>
</tr>
<tr>
<td></td>
<td> 网格化尺寸           </td>
<td> 指实际点集变换到网格化点集的尺寸，同属性窗口的网格化尺寸参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 自动设置旋转步长     </td>
<td> 控制旋转步长自动设置或手动设置，同属性窗口的是否自动设置旋转步长参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 旋转步长             </td>
<td> 进行点匹配过程中在旋转维度搜索时遍历过程的步长，单位为度，同属性窗口的旋转步长参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 自动设置缩放步长     </td>
<td> 控制缩放步长自动设置或手动设置，同属性窗口的是否自动设置缩放步长参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 缩放步长             </td>
<td> 进行点匹配过程中在缩放维度搜索时遍历过程的步长，单位为1同属性窗口是否自动设置缩放步长参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 运行参数             </td>
<td> 结果个数                                                     </td>
</tr>
<tr>
<td></td>
<td> 最小覆盖率           </td>
<td> 对得到结果覆盖率最小值的限定，同属性窗口的最小覆盖率参数。                                                                 </td>
</tr>
<tr>
<td></td>
<td> 自动设置捕获半径     </td>
<td> 控制捕获半径自动设置或手动设置，同属性窗口的是否自动设置捕获半径参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 捕获半径             </td>
<td> 训练点与实时点匹配时两点相距的最大距离，同属性窗口的捕获半径参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 缩放开启             </td>
<td> 控制是否开启缩放搜索范围，同属性窗口的是否开启缩放参数。                                                                   </td>
</tr>
<tr>
<td></td>
<td> 缩放范围             </td>
<td> 点匹配工具可以进行缩放维度的搜索，同属性窗口的捕获半径参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 旋转范围             </td>
<td> 点匹配工具点匹配工具可以进行旋转维度的搜索，需输入搜索范围如-15°~15°，同属性窗口的旋转搜索范围参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> X方向全范围搜索      </td>
<td> X方向，训练点集需要平移搜索的范围，可选择是否进行全范围搜索，同属性窗口的是否X方向全范围搜索参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> X方向移动范围        </td>
<td> 输入X方向，训练点集需要平移搜索的范围，同属性窗口的Y方向搜索范围参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> Y方向全范围搜索      </td>
<td> Y方向，训练点集需要平移搜索的范围，可选择是否进行全范围搜索，同属性窗口的是否Y方向全范围搜索参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> Y方向移动范围        </td>
<td> 输入Y方向，训练点集需要平移搜索的范围，同属性窗口的Y方向搜索范围参数。                                                               </td>
</tr>
</tbody>
</table>


<h2>输出</h2>

<table>
<thead>
<tr>
<th>分类 </th>
<th> 参数名称               </th>
<th> 参数描述                                                                                                               </th>
</tr>
</thead>
<tbody>
<tr>
<td> 监视窗口               </td>
<td> 训练点集                                                     </td>
<td> 输出训练点集坐标。                                       </td>
</tr>
<tr>
<td></td>
<td> 实时点集               </td>
<td> 输出实时点集坐标。                                                                                                     </td>
</tr>
<tr>
<td></td>
<td> 结果个数               </td>
<td> 训练点与实时点中匹配存在几种模式，默认为1。                                                                            </td>
</tr>
<tr>
<td></td>
<td> 变换后训练点集         </td>
<td> 输出变换后训练点集的坐标。                                                                                             </td>
</tr>
<tr>
<td></td>
<td> 点匹配结果             </td>
<td> 输出点匹配关系，如果实时点集存在训练点集的捕获半径范围内则两个点集为匹配点，匹配关系是点集中所有匹配点的集合。若训练点存在匹配点则会给出匹配实时点的序号。                                                           </td>
</tr>
<tr>
<td></td>
<td> 执行结果               </td>
<td> 工具执行结果。                                                                                                         </td>
</tr>
<tr>
<td></td>
<td> 执行时间               </td>
<td> 工具执行时间。                                                                                                         </td>
</tr>
<tr>
<td> 图像窗口               </td>
<td> 结果背景图像                                                 </td>
<td> 显示背景图像。                                           </td>
</tr>
<tr>
<td></td>
<td> 变换后训练点集显示位置 </td>
<td> 显示变换后训练点集。                                                                                                   </td>
</tr>
<tr>
<td></td>
<td> 变换后实时点集显示位置 </td>
<td> 显示变换后实时点集。                                                                                                   </td>
</tr>
<tr>
<td></td>
<td> 执行结果               </td>
<td> 显示工具执行结果，执行成功显示“OK”，执行失败显示“NG”，同监视窗口的执行结果参数。                                                           </td>
</tr>
<tr>
<td> 数据链                 </td>
<td> 训练点集                                                     </td>
<td> 输出训练点集，供后序工具使用，同监视窗口的训练点集参数。 </td>
</tr>
<tr>
<td></td>
<td> 实时点集               </td>
<td> 输出实时点集，供后序工具使用，同监视窗口的实时点集参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 点匹配结果             </td>
<td> 输出点匹配关系，供后序工具使用，同监视窗口的点匹配结果参数。                                                           </td>
</tr>
<tr>
<td></td>
<td> 点匹配距离结果             </td>
<td> 匹配点距离结果数组。                                                           </td>
</tr>
<tr>
<td></td>
<td> 二维线性变换平移量            </td>
<td> 输出目标相对于模板的平移变换，供后序工具使用。                                                            </td>
</tr>
<tr>
<td></td>
<td> 二维线性变换旋转角度           </td>
<td> 输出目标相对于模板的旋转变换，供后序工具使用。                                                           </td>
</tr>
</tbody>
</table>


<h2>详细说明</h2>

<h3>覆盖率</h3>

<p>覆盖率是指存在匹配点的训练点个数与训练点总数的比值。如图2所示，其覆盖率为50%。</p>

<p><img src="media/wps64.jpg" alt="img" /></p>

<p><imgnote>图2 覆盖率计算示意图</imgnote></p>

<h3>捕获半径</h3>

<p>捕获半径是指训练点与实时点匹配时两点相距的最大距离。如图3所示，实时点1在捕获半径内而实时点2在捕获半径外，因此实时点1为训练点的匹配点。</p>

<p><img src="media/wps65.jpg" alt="img" /></p>

<p><imgnote>图3 捕获半径示意图</imgnote></p>

<h3>运行结果</h3>

<p>高级属性界面，运行结果属性页中，包含匹配点对应关系、覆盖率、缩放、旋转、X平移、Y平移和RMS。其中RMS是衡量存在匹配点的实时点集和训练点集之间的差异的变量。P<sub>1</sub>为经过二维线性变换后的训练点集中存在匹配点的点，P<sub>2</sub>为实时点集中存在匹配点的点，P<sub>1</sub>和P<sub>2</sub>互为匹配点，n为训练点集存在匹配点的个数，disP<sub>1</sub>,P<sub>2</sub>)为匹配点之间的距离。RMS计算方式如下：</p>

<p>​ <img src="media/wps66.png" alt="img" />  (1)</p>

<h2>注意</h2>

<ul>
<li><p>建议可以自动设置的参数由程序自动设置，其中运行参数中部分默认参数为：结果个数1，最小覆盖率0.7，旋转范围-15~15度，缩放范围不开启。</p></li>
<li><p>如果自动设置参数下不能找到匹配结果，需要先确认如上参数设置合理。</p></li>
<li><p>如果仍不能找到匹配结果可以尝试手动设置训练参数。</p></li>
<li><p>若在自动设置参数下算法过慢，可以按照如下几条进行调整以达到较高效率：</p>

<ul>
<li><p>检查最小覆盖率设置是否过小。</p></li>
<li><p>通过减小旋转范围和缩放范围，进而减小搜索用时。</p></li>
<li><p>手动设置x方向移动范围和y方向移动范围从而缩小平移方向搜索用时，此方法对存在较多丢失点和额外点以及存在多个结果以至影响实时点质心位置的点集不建议使用。</p></li>
<li><p>尝试改变旋转步长、缩放步长、网格化尺寸等，减小搜索时间，需要进行试验确定是否会对结果产生影响。</p></li>
</ul>
</li>
</ul>


<h2>示例工程</h2>

<p>参见“\Samples\点匹配工具.gvp”。</p>
