<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>高度测量工具</h1>

<h2>功能</h2>

<p>在3D测量中，高度测量工具主要是获取输入点集或深度图像中感兴趣区域内三维空间点到指定基平面的高度距离，并完成高度直方图、最小值、最大值、均值、中值、标准差、低尾部和高尾部等高度信息的统计，帮助用户更加精确的获取高度距离的分布情况。</p>

<h2>参数</h2>

<table>
<thead>
<tr>
<th>分类 </th>
<th> 参数名称           </th>
<th> 参数描述                                                                                                                  </th>
</tr>
</thead>
<tbody>
<tr>
<td> 属性窗口           </td>
<td> 启用三维点集计算                                    </td>
<td> 选择“是”，参数链中显示输入三维点集参数，并使用该三维点集进行高度测量。 </td>
</tr>
<tr>
<td></td>
<td> 平面方向         </td>
<td> 分为两种：增加法向量一侧为正高度方向和减少法向量一侧为正高度方向和。<img src="media/wps21.jpg" alt="img" />                                                              </td>
</tr>
<tr>
<td></td>
<td> ROI类型          </td>
<td> 待检测区域，分为7种：整幅图像、矩形、仿射矩形、圆形、圆环、椭圆、多边形。                                                             </td>
</tr>
<tr>
<td></td>
<td> 启用掩膜           </td>
<td> 是否启用掩膜，选择“是”，显示掩膜个数、掩膜序号、掩膜形状等参数。                                                              </td>
</tr>
<tr>
<td></td>
<td> 掩膜个数           </td>
<td> 设置启用的掩膜个数，取值范围为 [1, 99]。                                                                                  </td>
</tr>
<tr>
<td></td>
<td> 掩膜序号           </td>
<td> 当前欲设置的掩膜索引。                                                                                                    </td>
</tr>
<tr>
<td></td>
<td> 掩膜类型         </td>
<td> 当前欲设置的掩膜形状，分为6种：矩形、仿射矩形、圆形、圆环、椭圆、多边形。                                                              </td>
</tr>
<tr>
<td></td>
<td> 低尾部分数         </td>
<td> 计算低尾部的比例参数，取值范围为 [0,1]，且高低尾部分数之和小于等于1，参考监视窗口低尾部参数。                                                              </td>
</tr>
<tr>
<td></td>
<td> 高尾部分数         </td>
<td> 计算高尾部的比例参数，取值范围为 [0,1]，参考监视窗口低尾部参数，且高低尾部分数之和小于等于1，参考监视窗口高尾部参数。                                                              </td>
</tr>
<tr>
<td></td>
<td> 标准差系数         </td>
<td> 标准差系数。                                                                                                              </td>
</tr>
<tr>
<td></td>
<td> 启用高度范围过滤器 </td>
<td> 选择“是”，则对计算得到的高度数据根据高度范围进行过滤，并显示高度范围下限和高度范围上限参数。                                                              </td>
</tr>
<tr>
<td></td>
<td> 高度范围的下限     </td>
<td> 高度范围的下限，且高度下限应小于等于高度上限，根据高度范围对计算得到的高度数据进行过滤。                                                              </td>
</tr>
<tr>
<td></td>
<td> 高度范围的上限     </td>
<td> 高度范围的上限，且高度下限应小于等于高度上限，根据高度范围对计算得到的高度数据进行过滤。                                                              </td>
</tr>
<tr>
<td></td>
<td> 包含高度范围内的值 </td>
<td> 选择“是”，则包含高度范围内的值，否则为排除高度范围内的值。                                                                </td>
</tr>
<tr>
<td></td>
<td> 系数补偿 </td>
<td> 测量结果系数补偿，一般为1，用于补偿成像等系统误差。 </td>
</tr>
<tr>
<td></td>
<td> 固定补偿 </td>
<td> 测量结果固定补偿，一般为0，用于补偿成像等系统误差。 </td>
</tr>
<tr>
<td></td>
<td> 高度最大值上限 </td>
<td> 取值范围为[-100, 100]，且下限应小于等于上限。 </td>
</tr>
<tr>
<td></td>
<td> 高度最大值下限 </td>
<td> 取值范围为[-100, 100]，且下限应小于等于上限。 </td>
</tr>
<tr>
<td></td>
<td> 高度最小值上限 </td>
<td> 取值范围为[-100, 100]，且下限应小于等于上限。 </td>
</tr>
<tr>
<td></td>
<td> 高度最小值上限 </td>
<td> 取值范围为[-100, 100]，且下限应小于等于上限。 </td>
</tr>
<tr>
<td></td>
<td> 高度均值上限 </td>
<td> 取值范围为[-100, 100]，且下限应小于等于上限。 </td>
</tr>
<tr>
<td></td>
<td> 高度均值下限 </td>
<td> 取值范围为[-100, 100]，且下限应小于等于上限。 </td>
</tr>
<tr>
<td></td>
<td> 高度中值上限       </td>
<td> 取值范围为[-100, 100]，且下限应小于等于上限。 </td>
</tr>
<tr>
<td></td>
<td> 高度中值下限       </td>
<td> 取值范围为[-100, 100]，且下限应小于等于上限。 </td>
</tr>
<tr>
<td> 图像窗口           </td>
<td> 深度图像                                                     </td>
<td> 显示待检测的深度图像，显示为伪彩色图像。                    </td>
</tr>
<tr>
<td></td>
<td> 检测区域           </td>
<td> 在图像上显示待检测区域。                                                                                                  </td>
</tr>
<tr>
<td></td>
<td> 掩膜区域           </td>
<td> 在图像上显示待掩膜区域。                                                                                                  </td>
</tr>
<tr>
<td> 数据链             </td>
<td> 深度图像                                                     </td>
<td> 输入待检测的深度图像。                                      </td>
</tr>
<tr>
<td></td>
<td> 基平面             </td>
<td> 选择高度测量的基准平面。                                                                                                  </td>
</tr>
<tr>
<td></td>
<td> 二维线性变换       </td>
<td> 目标相对于模板的平移、旋转、缩放变换。                                                                                    </td>
</tr>
<tr>
<td>高级界面</td>
<td>      无              </td>
<td> 无                                                                                                                        </td>
</tr>
</tbody>
</table>


<h2>输出</h2>

<table>
<thead>
<tr>
<th>分类 </th>
<th> 参数名称             </th>
<th> 参数描述                                                                                               </th>
</tr>
</thead>
<tbody>
<tr>
<td> 监视窗口             </td>
<td> 图像数据                                                     </td>
<td> 图像的长宽和像素大小，以及深度数据参数。 </td>
</tr>
<tr>
<td></td>
<td> 均值                 </td>
<td> 高度数据的平均高度值。                                                                                 </td>
</tr>
<tr>
<td></td>
<td> 中值                 </td>
<td> 将高度数据排序后，位于中间位置的高度数据。                                                             </td>
</tr>
<tr>
<td></td>
<td> 最小值               </td>
<td> 高度数据中最小高度数值。                                                                               </td>
</tr>
<tr>
<td></td>
<td> 最大值               </td>
<td> 高度数据中最大高度数值。                                                                               </td>
</tr>
<tr>
<td></td>
<td> 低尾部               </td>
<td> 使得小于某数值的数据量达到指定比例（低尾部分数）的高度数值。                                           </td>
</tr>
<tr>
<td></td>
<td> 高尾部               </td>
<td> 是的大于某数值的数据量达到指定比例（高尾部分数）的高度数值。                                           </td>
</tr>
<tr>
<td></td>
<td> 标准差               </td>
<td> 即高度数据标准差。                                                                                     </td>
</tr>
<tr>
<td></td>
<td> μ+kσ                 </td>
<td> 均值+k*标准差，其中k为标准差系数。                                                                     </td>
</tr>
<tr>
<td></td>
<td> 区域边界框内像素数目 </td>
<td> 感兴趣区域的最小外接矩形内像素（包含无效像素）的数目。                                                 </td>
</tr>
<tr>
<td></td>
<td> 关注像素数目         </td>
<td> 感兴趣区域形状内像素（包含无效像素）的数目。                                                           </td>
</tr>
<tr>
<td></td>
<td> 可见关注像素数目     </td>
<td> 感兴趣区域形状内有效像素的数目。                                                                       </td>
</tr>
<tr>
<td></td>
<td> 所用像素数目         </td>
<td> 感兴趣区域内实际用于高度测量的像素数目。                                                               </td>
</tr>
<tr>
<td></td>
<td> 执行结果             </td>
<td> 工具执行结果。                                                                                         </td>
</tr>
<tr>
<td></td>
<td> 执行时间             </td>
<td> 工具执行时间。                                                                                         </td>
</tr>
<tr>
<td> 图像窗口             </td>
<td> 输出图像                                                     </td>
<td> 显示检测的深度图像，显示为伪彩色图像。   </td>
</tr>
<tr>
<td></td>
<td> 直方图GUI            </td>
<td> 高度数据直方图                                                                                         </td>
</tr>
<tr>
<td></td>
<td> 数据链               </td>
<td> 同监视窗口参数，供后续工具使用。                                                                       </td>
</tr>
</tbody>
</table>


<h2>详细说明</h2>

<h3>使用向导</h3>

<p><strong>Step 1 设置是否启用三维点集</strong></p>

<p>选择“是”，参数链中显示输入三维点集参数，并使用该三维点集进行高度测量；选择“否”，参数链中显示输入深度图像，并使用深度图像进行高度测量。</p>

<p><strong>Step 2 设置基平面</strong></p>

<p>基平面的设置其实就是在深度图像上选择一个感兴趣区域以获取三维数据点，然后根据平面方向和拟合方法执行平面拟合。默认情况下，基平面为XOY平面。</p>

<p><strong>Step 3 设置平面侧方向</strong></p>

<p>执行高度计算时，需要确定测量高度的方向；平面侧方向共包含：IncreasingPlaneNormal和DecreasingPlaneNormal两种，其具体物理含义如下表所示。两种平面侧方向得到的高度数值是互为相反数的，因此，最终计算得到的统计信息描述也就不同。</p>

<p><img src="media/wps24.jpg" alt="img" /></p>

<p><strong>Step 4 设置测量区域及掩膜</strong></p>

<p>为了获取三维空间点数据需要设置测量区域及掩膜，其中，测量区域形状支持圆、椭圆、多边形、矩形、仿射矩形或圆环段等六种设置，掩膜支持任意数量的圆、椭圆、多边形、矩形、仿射矩形和圆环段等六种区域设置；此时，高度测量使用的是测量区域形状内除去掩膜区域的三维空间点数据。</p>

<p><strong>Step 5 设置直方图统计</strong></p>

<p>设置直方图统计主要包括：设置参数与设置高度范围过滤器。设置参数是对低尾部分数、高尾部分数和StdDev系数三个参数进行设置。设置高度范围过滤器主要是对计算得到的高度数据进行过滤，可以指定一个高度范围，并确定高度范围滤波模式是包含高度范围内的值还是排除高度范围内的值。</p>

<p><strong>Step 6 执行测量与输出结果</strong></p>

<p>获取三维空间点数据后，执行测量可以得到高度数据，并完成高度信息的统计，输出高度直方图、最小值、最大值、均值、中值、标准差、低尾部和高尾部等结果，以及像素计数结果。</p>

<p><strong>Step 7 补偿和结果判定</strong></p>

<p>若需要对计算结果进行补偿或者判定的话，可以对系数补偿、固定补偿、判定依据、最大值、最小值进行设置。</p>

<h2>注意</h2>

<p>无</p>

<h2>示例工程</h2>

<p>参见“\Samples\3D\深度图\3D测量工具.gvp”。</p>
