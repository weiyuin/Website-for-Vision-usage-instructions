<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>圆拟合工具</h1>

<h2>功能</h2>

<p>对输入的点集进行圆拟合，得到最匹配的圆。其应用效果如图1所示。</p>

<p><img src="media/wps3.jpg" alt="img" />  <img src="media/wps4.jpg" alt="img" /></p>

<p><imgnote>(a) 输入轮廓点集</imgnote> <imgnote>(b) 圆拟合结果</imgnote></p>

<p><imgnote>图1 圆拟合工具应用示意图</imgnote></p>

<h2>参数</h2>

<table>
<thead>
<tr>
<th>分类 </th>
<th> 参数名称           </th>
<th> 参数描述                                                                                                                  </th>
</tr>
</thead>
<tbody>
<tr>
<td> 属性窗口           </td>
<td> 拟合方法                                                     </td>
<td> 拟合方法分为2种，代数距离和几何距离。<img src="media/wps6.jpg" alt="img" /> </td>
</tr>
<tr>
<td></td>
<td> 启用全局最优拟合   </td>
<td> 是否启用全局最优拟合，默认为“否”。如果选否，则使用效率优先的拟合方式；如果选是，则使用全局最优拟合。                                                              </td>
</tr>
<tr>
<td></td>
<td> 考虑局外点         </td>
<td> 圆拟合过程中是否考虑偏离曲线较远的点(局外点)，选择“是”，显示局外点方法和局外点个数参数。                                                              </td>
</tr>
<tr>
<td></td>
<td> 局外点个数         </td>
<td> 不参与圆拟合的点个数，局外点个数小于总点数减3。                                                                           </td>
</tr>
<tr>
<td></td>
<td> 自动调整局外点个数 </td>
<td> 是否启用自动调整局外点个数，选择“是”，则会自动调整局外点数目，使得拟合结果的RMS降低。该参数能有效改善“局外点数目满足大多数数据，但在个别数据下其设置偏少1、2个使得RMS很大”的情况。                                                              </td>
</tr>
<tr>
<td></td>
<td> 约束半径           </td>
<td> 决定拟合圆的半径大小。                                                                                                    </td>
</tr>
<tr>
<td> 图像窗口           </td>
<td> 输入图像                                                     </td>
<td> 显示待检测的图像。                                          </td>
</tr>
<tr>
<td></td>
<td> 输入点集           </td>
<td> 显示输入点集。                                                                                                            </td>
</tr>
<tr>
<td> 数据链             </td>
<td> 输入图像                                                     </td>
<td> 输入图像宽度、高度、像素大小，同图像窗口的输入图像参数。    </td>
</tr>
<tr>
<td></td>
<td> 输入点集           </td>
<td> 输入拟合的点集，同图像窗口的输入点集参数。                                                                                </td>
</tr>
<tr>
<td>高级界面</td>
<td> 无                 </td>
<td> 无                                                                                                                        </td>
</tr>
</tbody>
</table>


<h2>输出</h2>

<table>
<thead>
<tr>
<th>分类 </th>
<th> 参数名称   </th>
<th> 参数描述                                                                                                               </th>
</tr>
</thead>
<tbody>
<tr>
<td> 监视窗口   </td>
<td> 输入图像                                                     </td>
<td> 输出图像宽度、高度、像素大小。                           </td>
</tr>
<tr>
<td></td>
<td> 圆形结果   </td>
<td> 输出拟合圆的圆心和半径。                                                                                               </td>
</tr>
<tr>
<td></td>
<td> 均方根误差 </td>
<td> 输出拟合结果的误差，值越小，拟合效果越好。                                                                             </td>
</tr>
<tr>
<td></td>
<td> 执行结果   </td>
<td> 工具执行结果。                                                                                                         </td>
</tr>
<tr>
<td></td>
<td> 执行时间   </td>
<td> 工具执行时间。                                                                                                         </td>
</tr>
<tr>
<td> 图像窗口   </td>
<td> 圆形结果                                                     </td>
<td> 显示圆拟合结果，同监视窗口的圆形结果参数。               </td>
</tr>
<tr>
<td></td>
<td> 执行结果   </td>
<td> 显示工具执行结果，执行成功显示“OK”，执行失败显示“NG”，同监视窗口的执行结果参数。                                                           </td>
</tr>
<tr>
<td> 数据链    </td>
<td> 圆形结果   </td>
<td> 输出圆拟合结果，供后序工具使用，同监视窗口的圆形结果参数。                                                             </td>
</tr>
</tbody>
</table>


<h2>详细说明</h2>

<h3>拟合方法</h3>

<p>根据误差函数定义的不同，曲线拟合分为基于代数距离的拟合和基于几何距离的拟合两种类型。假定待拟合的曲线方程为：</p>

<p><img src="media/wps9.png" alt="img" />               (1)</p>

<p>拟合数据点为(x<sub>i</sub> , y<sub>i</sub>)，i=1,2,…,n(n>1)，基于代数距离的拟合误差函数为：</p>

<p><img src="media/wps10.png" alt="img" />                 (2)</p>

<p>其中向量P=(P<sub>ab</sub>)为曲线方程中待求解的参数，Q(x<sub>i</sub> , y<sub>i</sub>)表示点(x<sub>i</sub> , y<sub>i</sub>)到曲线Q(x , y) = 0的代数距离。</p>

<p>基于几何距离的拟合误差函数为：</p>

<p><img src="media/wps11.png" alt="img" />                   (3)</p>

<p>其中向量P=(P<sub>ab</sub>)为曲线方程中待求解的参数，d<sub>i </sub>表示点(x<sub>i</sub> , y<sub>i</sub>)到曲线Q(x , y) = 0的几何距离。</p>

<p>基于代数距离的拟合方法与基于几何距离的拟合方法各有优缺点。</p>

<p>基于代数距离的拟合方法一般都能转换为线性模型参数估计的问题，求解过程简单直接。在大部分情况下，基于代数距离的拟合都能满足要求，但是它得到的并不是最优解，这主要由两方面因素造成：</p>

<ul>
<li><p>代数距离不具备欧式变换不变性；</p></li>
<li><p>在基于代数距离的拟合方法中，曲线上各点对拟合的贡献不相同。</p></li>
</ul>


<p>基于几何距离的拟合方法能很好的克服上述两方面问题，然而，由于几何距离di 的表达式复杂导致基于几何距离的拟合方法成为一个非线性模型参数估计的问题，使得基于几何距离的拟合方法计算过程比较复杂。在基于几何距离的拟合方法中提供了考虑参数约束(约束半径、角度)的拟合。</p>

<h2>注意</h2>

<ul>
<li>拟合方法为几何距离，开启局外点时，启用全局最优拟合参数为是，不可更改。</li>
</ul>


<h2>示例工程</h2>

<p>参见“\Samples\形状间距及相关点.gvp”。</p>
