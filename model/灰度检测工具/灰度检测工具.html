<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>Công cụ kiểm tra mức xám</h1>

<h2>1. Tổng quan chức năng</h2>

<p>​     Công cụ kiểm tra mức xám chủ yếu được dùng để kiểm tra tỷ lệ đạt yêu cầu của mức xám trong toàn bộ ảnh đầu vào hoặc một vùng cụ thể của ảnh.</p>

<p><img src="media/GcGrayDetectTool_1_1.png" alt="" /></p>

<p><imgnote>Hình 1 Minh họa ứng dụng công cụ kiểm tra mức xám</imgnote></p>

<h2>2. Bối cảnh ứng dụng</h2>

<p>​     Công cụ kiểm tra mức xám có thể lấy được đặc trưng mức xám trong ảnh hoặc trong vùng ROI của ảnh, như tỷ lệ đạt (tỷ lệ điểm ảnh nằm trong khoảng mức xám), giá trị mức xám trung bình của vùng,… Phù hợp với các trường hợp mục tiêu và nền có sự khác biệt rõ ràng về mức xám để xác định có mục tiêu tồn tại trong vùng kiểm tra hay không.</p>

<h2>3. Nguyên lý</h2>

<p>​     <strong>Tỷ lệ đạt</strong></p>

<p>​     Số lượng điểm ảnh trong vùng ROI có mức xám nằm trong khoảng giới hạn trên và dưới (như hình 2, phần đỏ là điểm ảnh có mức xám nằm trong khoảng từ 100 đến 255) chia cho tổng số điểm ảnh.</p>

<p><img src="media/GcGrayDetectTool_1_2.png" alt="img" /></p>

<p><imgnote>Hình 2 Minh họa tính toán công cụ kiểm tra mức xám</imgnote></p>

<p>​     <strong>Giá trị mức xám trung bình</strong></p>

<p>​     Tổng mức xám của tất cả điểm ảnh trong ROI chia cho số lượng điểm ảnh.</p>

<h2>4. Hướng dẫn sử dụng</h2>

<ul>
<li><h4>Thêm công cụ, nạp ảnh</h4></li>
</ul>

<p><img src="media/GcGrayDetectTool_1_3.png" alt="" /></p>

<ul>
<li><h4>Thiết lập vùng kiểm tra, ngưỡng mức xám trên, ngưỡng mức xám dưới, giới hạn trên và dưới của tỷ lệ đạt</h4></li>
</ul>

<p><img src="media/GcGrayDetectTool_1_4.png" alt="" /></p>

<p><img src="media/GcGrayDetectTool_1_5.png" alt="" /></p>

<p><strong>Vùng kiểm tra</strong></p>

<p>Vùng thực hiện kiểm tra của công cụ, có 3 loại: hình elip, đa giác, và hình chữ nhật biến dạng (affine rectangle).</p>

<p>Có thể thiết lập bằng chế độ Edit (như hình trên là giao diện thiết lập hình chữ nhật biến dạng) hoặc qua bảng thông số ParameterList. Hình chữ nhật biến dạng có thể liên kết từ bên ngoài.</p>

<p><strong>Ngưỡng mức xám trên và dưới</strong></p>

<p>Khoảng mức xám mục tiêu, thường thiết lập dựa theo mức xám của vật thể hoặc giá trị trung bình của vùng.</p>

<p><strong>Giới hạn trên và dưới của tỷ lệ đạt</strong></p>

<p>Thiết lập phạm vi hợp lệ cho tham số đầu ra <a href="#%E5%90%88%E6%A0%BC%E7%99%BE%E5%88%86%E6%AF%94">tỷ lệ đạt</a>, giá trị nằm trong khoảng [0.0, 1.0], kiểu số thực, độ chính xác 1E-6. Ngoài ra có thể đặt là “--.--” nghĩa là không giới hạn.</p>

<p>Sau khi thiết lập giới hạn trên và dưới cho <a href="#%E5%90%88%E6%A0%BC%E7%99%BE%E5%88%86%E6%AF%94">tỷ lệ đạt</a>, tiến hành thực thi công cụ.</p>

<p>Khi kết quả <a href="#%E5%90%88%E6%A0%BC%E7%99%BE%E5%88%86%E6%AF%94">tỷ lệ đạt</a> nằm trong phạm vi hợp lệ, công cụ báo thực thi thành công; ngược lại báo lỗi.</p>

<ul>
<li><h4>Xem kết quả</h4></li>
</ul>

<p><img src="media/GcGrayDetectTool_1_6.png" alt="" /></p>

<p><img src="media/GcGrayDetectTool_1_7.png" alt="" /></p>

<h2>5. Câu hỏi thường gặp</h2>

<p>Không có</p>

<h2>6. Mô tả tham số</h2>

<h4>Tham số đầu vào</h4>

<table>
<thead>
<tr>
<th> Tên tham số </th>
<th> Mô tả </th>
</tr>
</thead>
<tbody>
<tr>
<td> Ảnh đầu vào </td>
<td> Ảnh cần kiểm tra (chiều rộng, chiều cao, kích thước pixel). </td>
</tr>
<tr>
<td> Biến đổi tuyến tính 2D </td>
<td> Phép tịnh tiến, quay, thu phóng của vật thể so với mẫu. </td>
</tr>
<tr>
<td> Loại vùng kiểm tra </td>
<td> Có 3 loại: hình elip, đa giác, hình chữ nhật biến dạng. Đối với hình elip, tham số góc quay (Rotation), và đối với hình chữ nhật biến dạng là Rotation và Skew có dải giá trị [-180,180), có thể quan sát và chỉnh trong chế độ Edit. </td>
</tr>
<tr>
<td> Giới hạn trên tỷ lệ đạt </td>
<td> Giá trị trong khoảng [0.0, 1.0]. Nếu tỷ lệ đạt nhỏ hơn giới hạn này, kết quả công cụ là true, ngược lại là false. </td>
</tr>
<tr>
<td> Giới hạn dưới tỷ lệ đạt </td>
<td> Giá trị trong khoảng [0.0, 1.0]. Nếu tỷ lệ đạt lớn hơn giới hạn này, kết quả công cụ là true, ngược lại là false. </td>
</tr>
<tr>
<td> Ngưỡng mức xám trên </td>
<td> Giá trị từ 0 đến 255. Mức xám trong khoảng này được tính là hợp lệ. Ngưỡng dưới không lớn hơn ngưỡng trên. </td>
</tr>
<tr>
<td> Ngưỡng mức xám dưới </td>
<td> Giá trị từ 0 đến 255. Mức xám trong khoảng này được tính là hợp lệ. Ngưỡng dưới không lớn hơn ngưỡng trên. </td>
</tr>
<tr>
<td> Giao diện nâng cao </td>
<td> Không có </td>
</tr>
</tbody>
</table>

<h4>Tham số đầu ra</h4>

<table>
<thead>
<tr>
<th> Tên tham số </th>
<th> Mô tả </th>
</tr>
</thead>
<tbody>
<tr>
<td> Ảnh đầu vào </td>
<td> Xuất thông tin chiều rộng, chiều cao, kích thước pixel của ảnh. </td>
</tr>
<tr>
<td> Kết quả tỷ lệ đạt </td>
<td> Tỷ lệ hợp lệ thực tế sau khi tính toán. </td>
</tr>
<tr>
<td> Mức xám trung bình </td>
<td> Giá trị trung bình mức xám của vùng được tính toán. </td>
</tr>
<tr>
<td> Kết quả thực thi </td>
<td> Kết quả thực thi của công cụ. </td>
</tr>
<tr>
<td> Thời gian thực thi </td>
<td> Thời gian thực thi của công cụ. </td>
</tr>
</tbody>
</table>

<h2>7. Dự án mẫu</h2>

<p>参见“\Samples\灰度检测工具.gvp”。</p>
