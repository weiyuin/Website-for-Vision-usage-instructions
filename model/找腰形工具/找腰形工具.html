<head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../css/main.css" /> 
           <script src="../../js/jquery.js"></script> 
           <script src="../../js/main.js"></script> 
           </head> 
           <head> 
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../css/main.css" /> 
           <script src="../../../js/jquery.js"></script> 
           <script src="../../../js/main.js"></script> 
           </head>  
           <head>  
           <meta charset="utf-8"> 
           <link rel="stylesheet" href="../../../../css/main.css" /> 
           <script src="../../../../js/jquery.js"></script> 
           <script src="../../../../js/main.js"></script> 
           </head>
<h1>找腰形工具</h1>

<h2>功能</h2>

<p>找腰形工具主要是在指定的ROI区域内对实际腰形工件的边缘进行拟合，获取组成腰形边缘的圆弧与线段，一般与定位工具配合使用，根据边缘模式、边缘极性等参数实现高精度的查找。其实际应用效果如图1所示。</p>

<p><img src="media/wps58.jpg" alt="img" /> <img src="media/wps59.jpg" alt="img" /></p>

<p><imgnote>(a) 工具摆放示意图</imgnote> <imgnote>(b) 查找结果</imgnote></p>

<p><imgnote>图1 找腰形工具应用示意图</imgnote></p>

<h2>参数</h2>

<table>
<thead>
<tr>
<th>分类 </th>
<th> 参数名称         </th>
<th> 参数描述                                                                                                               </th>
</tr>
</thead>
<tbody>
<tr>
<td> 属性窗口         </td>
<td> 边缘模式                                                     </td>
<td> 卡尺工具的边缘模式有2种，单边缘和双边缘。                </td>
</tr>
<tr>
<td></td>
<td> 边缘极性         </td>
<td> 边缘极性是指图像边缘灰度级的过渡形式，分为3种，任意极性、亮到暗和暗到亮。                                                           </td>
</tr>
<tr>
<td></td>
<td> 对比度阈值       </td>
<td> 卡尺工具默认只采用对比度评价分数，即按照边缘信号的强度来评分，输出边缘最强的点。对比度阈值的取值范围是0~255。                                                           </td>
</tr>
<tr>
<td></td>
<td> 滤波器半宽       </td>
<td> 卡尺工具中涉及到对图像边缘进行滤波操作，滤波器半宽尺寸与图像边缘的锐度有关系。图像边缘的锐度越高，滤波器半宽尺寸可以设置的越小。滤波器半宽尺寸的取值范围为1~∞。                                                           </td>
</tr>
<tr>
<td></td>
<td> 探测点偏移       </td>
<td> 是否对探测点进行偏移，开启后显示根据卡尺偏移和偏移距离参数。                                                           </td>
</tr>
<tr>
<td></td>
<td> 根据卡尺偏移     </td>
<td> 选择“是”，设置偏移根据卡尺方向，否则根据拟合曲线段方向。                                                               </td>
</tr>
<tr>
<td></td>
<td> 偏移距离         </td>
<td> 探测点按照指定的方向偏移一定的距离                                                                                     </td>
</tr>
<tr>
<td></td>
<td> 局外点比例       </td>
<td> 局外点就是偏离曲线较远的点。局外点比例即不参与曲线拟合的点的比例，取值范围是0~1。                                                           </td>
</tr>
<tr>
<td></td>
<td> 局外点方法       </td>
<td> 局外点方法分为4种，Combination(全组合)、Ransac(随机抽样)、Robust(权重)和RansacRobust(随机抽样权重)。拟合时间：Combination>RansacRobust>Ransac> Robust。拟合结果的可信度：Combination>RansacRobust> Robust> Ransac。                                                           </td>
</tr>
<tr>
<td></td>
<td> 曲线拟合         </td>
<td> 是否根据探测点进行曲线拟合。选择“是”，则进行拟合，并将拟合结果输出到监视窗口的拟合圆弧、拟合线段和拟合线交点等参数。                                                           </td>
</tr>
<tr>
<td></td>
<td> 显示拟合圆弧     </td>
<td> 若曲线拟合选择“是”，则该参数选择“是”时，显示拟合结果中的拟合圆弧曲线。                                                           </td>
</tr>
<tr>
<td></td>
<td> 显示拟合线段     </td>
<td> 若曲线拟合选择“是”，则该参数选择“是”时，显示拟合结果中的拟合线段。                                                           </td>
</tr>
<tr>
<td></td>
<td> 显示拟合线交点   </td>
<td> 若曲线拟合选择“是”，则该参数选择“是”时，显示拟合结果中拟合圆弧和拟合线段的交点。                                                           </td>
</tr>
<tr>
<td></td>
<td> 显示中心线段     </td>
<td> 若曲线拟合选择“是”，则该参数选择“是”时，显示拟合结果中的中心线段。                                                           </td>
</tr>
<tr>
<td></td>
<td> 显示圆心         </td>
<td> 若曲线拟合选择“是”，则该参数选择“是”时，显示拟合结果中拟合圆弧所在圆的圆心。                                                           </td>
</tr>
<tr>
<td></td>
<td> 显示质心         </td>
<td> 选择“是”，则显示卡尺检测到的所有探测点（不包含局外点）的质心。                                                           </td>
</tr>
<tr>
<td></td>
<td> 显示探测点       </td>
<td> 选择“是”，显示卡尺的探测点；选择“否”，不显示卡尺的探测点。其中局外点用红色标注，其余用绿色标注。                                                           </td>
</tr>
<tr>
<td></td>
<td> 显示偏移前探测点 </td>
<td> 若探测点偏移选择“是”，则该参数选择“是”时，则显示偏移之前的原始探测点。                                                           </td>
</tr>
<tr>
<td></td>
<td> 探测点连线       </td>
<td> 选择“是”，则将卡尺检测到的（偏移后的）探测点用线段连接起来。                                                           </td>
</tr>
<tr>
<td></td>
<td> 显示外接矩形     </td>
<td> 选择“是”，则显示卡尺检测到的所有（偏移后的）探测点所在的坐标最小外接矩形。                                                           </td>
</tr>
<tr>
<td> 图像窗口         </td>
<td> 输入图像                                                     </td>
<td> 显示待检测的图像。                                       </td>
</tr>
<tr>
<td></td>
<td> 查找区域         </td>
<td> 图像中参与查找的可变折线矩形区域。                                                                                     </td>
</tr>
<tr>
<td> 数据链           </td>
<td> 输入图像                                                     </td>
<td> 输入图像宽度、高度、像素大小，同图像窗口的输入图像参数。 </td>
</tr>
<tr>
<td></td>
<td> 二维线性变换     </td>
<td> 目标相对于模板的平移、旋转、缩放变换。                                                                                 </td>
</tr>
<tr>
<td>高级界面</td>
<td> 无               </td>
<td> 无                                                                                                                     </td>
</tr>
</tbody>
</table>


<h2>输出</h2>

<table>
<thead>
<tr>
<th>分类 </th>
<th> 参数名称   </th>
<th> 参数描述                                                                                                                   </th>
</tr>
</thead>
<tbody>
<tr>
<td> 监视窗口   </td>
<td> 输入图像                                                     </td>
<td> 输出图像宽度、高度、像素大小。                               </td>
</tr>
<tr>
<td></td>
<td> 拟合圆弧   </td>
<td> 输出拟合圆弧的圆心、半径、角度。                                                                                           </td>
</tr>
<tr>
<td></td>
<td> 拟合线段   </td>
<td> 输出拟合线段的起始点坐标和终止点坐标。                                                                                     </td>
</tr>
<tr>
<td></td>
<td> 拟合线交点 </td>
<td> 输出拟合圆弧和拟合直线的四个交点坐标。                                                                                     </td>
</tr>
<tr>
<td></td>
<td> 质心       </td>
<td> 输出卡尺检测到的（不包含局外点）探测点的质心所在坐标。                                                                     </td>
</tr>
<tr>
<td></td>
<td> 圆心       </td>
<td> 输出拟合圆弧的圆心。                                                                                                       </td>
</tr>
<tr>
<td></td>
<td> 执行结果   </td>
<td> 工具执行结果。                                                                                                             </td>
</tr>
<tr>
<td></td>
<td> 执行时间   </td>
<td> 工具执行时间。                                                                                                             </td>
</tr>
<tr>
<td> 图像窗口   </td>
<td> 输入图像                                                     </td>
<td> 显示工具执行结果图像，同监视窗口的输出图像参数。             </td>
</tr>
<tr>
<td></td>
<td> 拟合圆弧   </td>
<td> 显示图像查找区域内的拟合圆弧结果，同监视窗口的拟合圆弧参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 拟合线段   </td>
<td> 显示图像查找区域内的拟合线段结果，同监视窗口的拟合线段参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 拟合线交点 </td>
<td> 输出拟合圆弧和拟合直线的四个交点坐标，同监视窗口的拟合线交点参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 探测点     </td>
<td> 显示卡尺的探测点。                                                                                                         </td>
</tr>
<tr>
<td></td>
<td> 质心       </td>
<td> 显示卡尺的探测点的质心，同监视窗口的质心参数。                                                                             </td>
</tr>
<tr>
<td></td>
<td> 圆心       </td>
<td> 显示平图像查找区域内的拟合圆弧的圆心，同监视窗口的圆心参数。                                                               </td>
</tr>
<tr>
<td></td>
<td> 中心线段   </td>
<td> 显示拟合结果中的中心线段。                                                                                                 </td>
</tr>
<tr>
<td></td>
<td> 外接矩形   </td>
<td> 显示卡尺检测到的所有（偏移后的）探测点所在的坐标最小外接矩形。                                                               </td>
</tr>
<tr>
<td></td>
<td> 执行结果   </td>
<td> 显示工具执行结果，执行成功显示“OK”，执行失败显示“NG”，同监视窗口的执行结果参数。                                                               </td>
</tr>
<tr>
<td> 数据链     </td>
<td> 拟合圆弧   </td>
<td> 同监视窗口参数，供后序工具使用。                                                                                           </td>
</tr>
<tr>
<td></td>
<td> 拟合线段   </td>
<td> 同监视窗口参数，供后序工具使用。                                                                                           </td>
</tr>
<tr>
<td></td>
<td> 拟合线交点 </td>
<td> 同监视窗口参数，供后序工具使用。                                                                                           </td>
</tr>
<tr>
<td></td>
<td> 质心       </td>
<td> 同监视窗口参数，供后序工具使用。                                                                                           </td>
</tr>
<tr>
<td></td>
<td> 圆心       </td>
<td> 同监视窗口参数，供后序工具使用。                                                                                           </td>
</tr>
</tbody>
</table>


<h2>详细说明</h2>

<p>无</p>

<h2>注意</h2>

<p>无</p>

<h2>示例工程</h2>

<p>参见“\Samples\找腰形工具.gvp”。</p>
